<!DOCTYPE html>
<html lang="en-US">

<head>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>User Manual</title>
  <meta name="description"
    content="rust-analyzer: building a better Rust IDE">

  <link rel="stylesheet" href="/css/asciidoctor.css">
  <link rel="stylesheet" href="/css/rouge-github.css">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">

  <link rel="canonical" href="https://rust-analyzer.github.io//manual.html">
  <link rel="alternate" type="application/rss+xml" title="rust-analyzer"
    href="https://rust-analyzer.github.io//feed.xml">

  <link rel="apple-touch-icon" sizes="180x180" href="/assets/fav/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/fav/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/fav/favicon-16x16.png">
  <link rel="manifest" href="/assets/site.webmanifest">
  <link rel="mask-icon" href="/assets/fav/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#ffc40d">
  <meta name="theme-color" content="#ffffff">
</head>

<body>
  
  <header>
    <div id="header-inner">
      <div id="header-left">
        <a class="site-title" href="/">
          <img src="/assets/rust-analyzer.svg" alt="rust analyzer" id="header-logo">
        </a>
      </div>
      <div id="header-right">
        <a class="nav-link" href="https://opencollective.com/rust-analyzer/">Sponsor</a>
        <a class="nav-link" href="/manual.html">Docs</a>
        <a class="nav-link" href="/blog">Blog</a>
        <a class="nav-link" href="/thisweek">Changelog</a>
      </div>
    </div>
  </header>
  

  <main>
    <article>
<h1>User Manual</h1>
<div class="post-meta sect1">
  
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>At its core, rust-analyzer is a <strong>library</strong> for semantic analysis of Rust code as it changes over time.
This manual focuses on a specific usage of the library&#8201;&#8212;&#8201;running it as part of a server that implements the
<a href="https://microsoft.github.io/language-server-protocol/">Language Server Protocol</a> (LSP).
The LSP allows various code editors, like VS Code, Emacs or Vim, to implement semantic features like completion or goto definition by talking to an external language server process.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph lead">
<p>To improve this document, send a pull request:<br>
<a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/docs/user/manual.adoc">https://github.com/rust-analyzer/&#8230;&#8203;/manual.adoc</a></p>
</div>
<div class="paragraph">
<p>The manual is written in <a href="https://asciidoc.org">AsciiDoc</a> and includes some extra files which are generated from the source code. Run <code>cargo test</code> and <code>cargo test -p xtask</code> to create these and then <code>asciidoctor manual.adoc</code> to create an HTML copy.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you have questions about using rust-analyzer, please ask them in the <a href="https://users.rust-lang.org/c/ide/14">&#8220;IDEs and Editors&#8221;</a> topic of Rust users forum.</p>
</div>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#installation">Installation</a>
<ul class="sectlevel2">
<li><a href="#vs-code">VS Code</a></li>
<li><a href="#rust-analyzer-language-server-binary">rust-analyzer Language Server Binary</a></li>
<li><a href="#emacs">Emacs</a></li>
<li><a href="#vimneovim">Vim/NeoVim</a></li>
<li><a href="#sublime-text-3">Sublime Text 3</a></li>
<li><a href="#gnome-builder">GNOME Builder</a></li>
<li><a href="#eclipse-ide">Eclipse IDE</a></li>
<li><a href="#kate-text-editor">Kate Text Editor</a></li>
<li><a href="#juci">juCi++</a></li>
</ul>
</li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
<li><a href="#configuration">Configuration</a></li>
<li><a href="#non-cargo-based-projects">Non-Cargo Based Projects</a></li>
<li><a href="#security">Security</a></li>
<li><a href="#privacy">Privacy</a></li>
<li><a href="#features">Features</a>
<ul class="sectlevel2">
<li><a href="#annotations">Annotations</a></li>
<li><a href="#auto-import">Auto Import</a></li>
<li><a href="#completion-with-autoimport">Completion With Autoimport</a></li>
<li><a href="#debug-itemtree">Debug ItemTree</a></li>
<li><a href="#expand-macro-recursively">Expand Macro Recursively</a></li>
<li><a href="#expand-and-shrink-selection">Expand and Shrink Selection</a></li>
<li><a href="#file-structure">File Structure</a></li>
<li><a href="#find-all-references">Find All References</a></li>
<li><a href="#folding">Folding</a></li>
<li><a href="#format-string-completion">Format String Completion</a></li>
<li><a href="#go-to-declaration">Go to Declaration</a></li>
<li><a href="#go-to-definition">Go to Definition</a></li>
<li><a href="#go-to-implementation">Go to Implementation</a></li>
<li><a href="#go-to-type-definition">Go to Type Definition</a></li>
<li><a href="#highlight-related">Highlight Related</a></li>
<li><a href="#hover">Hover</a></li>
<li><a href="#inlay-hints">Inlay Hints</a></li>
<li><a href="#join-lines">Join Lines</a></li>
<li><a href="#magic-completions">Magic Completions</a></li>
<li><a href="#matching-brace">Matching Brace</a></li>
<li><a href="#memory-usage">Memory Usage</a></li>
<li><a href="#move-item">Move Item</a></li>
<li><a href="#on-enter">On Enter</a></li>
<li><a href="#on-typing-assists">On Typing Assists</a></li>
<li><a href="#parent-module">Parent Module</a></li>
<li><a href="#related-tests">Related Tests</a></li>
<li><a href="#rename">Rename</a></li>
<li><a href="#run">Run</a></li>
<li><a href="#semantic-syntax-highlighting">Semantic Syntax Highlighting</a></li>
<li><a href="#show-syntax-tree">Show Syntax Tree</a></li>
<li><a href="#status">Status</a></li>
<li><a href="#structural-search-and-replace">Structural Search and Replace</a></li>
<li><a href="#user-snippet-completions">User Snippet Completions</a></li>
<li><a href="#view-crate-graph">View Crate Graph</a></li>
<li><a href="#view-hir">View Hir</a></li>
<li><a href="#workspace-symbol">Workspace Symbol</a></li>
</ul>
</li>
<li><a href="#assists-code-actions">Assists (Code Actions)</a></li>
<li><a href="#diagnostics">Diagnostics</a>
<ul class="sectlevel2">
<li><a href="#add-reference-here">add-reference-here</a></li>
<li><a href="#break-outside-of-loop">break-outside-of-loop</a></li>
<li><a href="#inactive-code">inactive-code</a></li>
<li><a href="#incorrect-ident-case">incorrect-ident-case</a></li>
<li><a href="#invalid-derive-target">invalid-derive-target</a></li>
<li><a href="#macro-error">macro-error</a></li>
<li><a href="#malformed-derive">malformed-derive</a></li>
<li><a href="#mismatched-arg-count">mismatched-arg-count</a></li>
<li><a href="#missing-fields">missing-fields</a></li>
<li><a href="#missing-match-arm">missing-match-arm</a></li>
<li><a href="#missing-ok-or-some-in-tail-expr">missing-ok-or-some-in-tail-expr</a></li>
<li><a href="#missing-unsafe">missing-unsafe</a></li>
<li><a href="#no-such-field">no-such-field</a></li>
<li><a href="#remove-this-semicolon">remove-this-semicolon</a></li>
<li><a href="#replace-filter-map-next-with-find-map">replace-filter-map-next-with-find-map</a></li>
<li><a href="#unimplemented-builtin-macro">unimplemented-builtin-macro</a></li>
<li><a href="#unlinked-file">unlinked-file</a></li>
<li><a href="#unnecessary-braces">unnecessary-braces</a></li>
<li><a href="#unresolved-extern-crate">unresolved-extern-crate</a></li>
<li><a href="#unresolved-import">unresolved-import</a></li>
<li><a href="#unresolved-macro-call">unresolved-macro-call</a></li>
<li><a href="#unresolved-module">unresolved-module</a></li>
<li><a href="#unresolved-proc-macro">unresolved-proc-macro</a></li>
</ul>
</li>
<li><a href="#editor-features">Editor Features</a>
<ul class="sectlevel2">
<li><a href="#vs-code-2">VS Code</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="sect1">
<h2 id="installation"><a class="anchor" href="#installation"></a>Installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In theory, one should be able to just install the <a href="#rust-analyzer-language-server-binary"><code>rust-analyzer</code> binary</a> and have it automatically work with any editor.
We are not there yet, so some editor specific setup is required.</p>
</div>
<div class="paragraph">
<p>Additionally, rust-analyzer needs the sources of the standard library.
If the source code is not present, rust-analyzer will attempt to install it automatically.</p>
</div>
<div class="paragraph">
<p>To add the sources manually, run the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="nv">$ </span>rustup component add rust-src
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="sect2">
<h3 id="vs-code"><a class="anchor" href="#vs-code"></a>VS Code</h3>
<div class="paragraph">
<p>This is the best supported editor at the moment.
The rust-analyzer plugin for VS Code is maintained
<a href="https://github.com/rust-analyzer/rust-analyzer/tree/master/editors/code">in tree</a>.</p>
</div>
<div class="paragraph">
<p>You can install the latest release of the plugin from
<a href="https://marketplace.visualstudio.com/items?itemName=matklad.rust-analyzer">the marketplace</a>.</p>
</div>
<div class="paragraph">
<p>Note that the plugin may cause conflicts with the
<a href="https://marketplace.visualstudio.com/items?itemName=rust-lang.rust">official Rust plugin</a>.
It is recommended to disable the Rust plugin when using the rust-analyzer extension.</p>
</div>
<div class="paragraph">
<p>By default, the plugin will prompt you to download the matching version of the server as well:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/9021944/75067008-17502500-54ba-11ea-835a-f92aac50e866.png" alt="75067008 17502500 54ba 11ea 835a f92aac50e866">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>To disable this notification put the following to <code>settings.json</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="p">{</span><span class="w"> </span><span class="nl">"rust-analyzer.updates.askBeforeDownload"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The server binary is stored in:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Linux: <code>~/.config/Code/User/globalStorage/matklad.rust-analyzer</code></p>
</li>
<li>
<p>Linux (Remote, such as WSL): <code>~/.vscode-server/data/User/globalStorage/matklad.rust-analyzer</code></p>
</li>
<li>
<p>macOS: <code>~/Library/Application\ Support/Code/User/globalStorage/matklad.rust-analyzer</code></p>
</li>
<li>
<p>Windows: <code>%APPDATA%\Code\User\globalStorage\matklad.rust-analyzer</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that we only support two most recent versions of VS Code.</p>
</div>
<div class="sect3">
<h4 id="updates"><a class="anchor" href="#updates"></a>Updates</h4>
<div class="paragraph">
<p>The extension will be updated automatically as new versions become available.
It will ask your permission to download the matching language server version binary if needed.</p>
</div>
<div class="sect4">
<h5 id="nightly"><a class="anchor" href="#nightly"></a>Nightly</h5>
<div class="paragraph">
<p>We ship nightly releases for VS Code.
To help us out with testing the newest code and follow the bleeding edge of our <code>master</code>, please use the following config:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="p">{</span><span class="w"> </span><span class="nl">"rust-analyzer.updates.channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nightly"</span><span class="w"> </span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>You will be prompted to install the <code>nightly</code> extension version.
Just click <code>Download now</code> and from that moment you will get automatic updates every 24 hours.</p>
</div>
<div class="paragraph">
<p>If you don&#8217;t want to be asked for <code>Download now</code> every day when the new nightly version is released add the following to your <code>settings.json</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="p">{</span><span class="w"> </span><span class="nl">"rust-analyzer.updates.askBeforeDownload"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Nightly extension should <strong>only</strong> be installed via the <code>Download now</code> action from VS Code.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="manual-installation"><a class="anchor" href="#manual-installation"></a>Manual installation</h4>
<div class="paragraph">
<p>Alternatively, procure both <code>rust-analyzer.vsix</code> and your platform&#8217;s matching <code>rust-analyzer-{platform}</code>, for example from the
<a href="https://github.com/rust-analyzer/rust-analyzer/releases">releases</a> page.</p>
</div>
<div class="paragraph">
<p>Install the extension with the <code>Extensions: Install from VSIX</code> command within VS Code, or from the command line via:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre>$ code --install-extension /path/to/rust-analyzer.vsix
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Copy the <code>rust-analyzer-{platform}</code> binary anywhere, then add the path to your settings.json, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="p">{</span><span class="w"> </span><span class="nl">"rust-analyzer.server.path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"~/.local/bin/rust-analyzer-linux"</span><span class="w"> </span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="building-from-source"><a class="anchor" href="#building-from-source"></a>Building From Source</h4>
<div class="paragraph">
<p>Alternatively, both the server and the Code plugin can be installed from source:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre>$ git clone https://github.com/rust-analyzer/rust-analyzer.git &amp;&amp; cd rust-analyzer
$ cargo xtask install
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>You&#8217;ll need Cargo, nodejs and npm for this.</p>
</div>
<div class="paragraph">
<p>Note that installing via <code>xtask install</code> does not work for VS Code Remote, instead you&#8217;ll need to install the <code>.vsix</code> manually.</p>
</div>
<div class="paragraph">
<p>If you&#8217;re not using Code, you can compile and install only the LSP server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre>$ cargo xtask install --server
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="rust-analyzer-language-server-binary"><a class="anchor" href="#rust-analyzer-language-server-binary"></a>rust-analyzer Language Server Binary</h3>
<div class="paragraph">
<p>Other editors generally require the <code>rust-analyzer</code> binary to be in <code>$PATH</code>.
You can download pre-built binaries from the <a href="https://github.com/rust-analyzer/rust-analyzer/releases">releases</a> page.
You will need to uncompress and rename the binary for your platform, e.g. from <code>rust-analyzer-aarch64-apple-darwin.gz</code> on Mac OS to <code>rust-analyzer</code>, make it executable, then move it into a directory in your <code>$PATH</code>.</p>
</div>
<div class="paragraph">
<p>On Linux to install the <code>rust-analyzer</code> binary into <code>~/.local/bin</code>, these commands should work:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="nv">$ </span><span class="nb">mkdir</span> <span class="nt">-p</span> ~/.local/bin
<span class="nv">$ </span>curl <span class="nt">-L</span> https://github.com/rust-analyzer/rust-analyzer/releases/latest/download/rust-analyzer-x86_64-unknown-linux-gnu.gz | <span class="nb">gunzip</span> <span class="nt">-c</span> - <span class="o">&gt;</span> ~/.local/bin/rust-analyzer
<span class="nv">$ </span><span class="nb">chmod</span> +x ~/.local/bin/rust-analyzer
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Make sure that <code>~/.local/bin</code> is listed in the <code>$PATH</code> variable and use the appropriate URL if you&#8217;re not on a <code>x86-64</code> system.</p>
</div>
<div class="paragraph">
<p>You don&#8217;t have to use <code>~/.local/bin</code>, any other path like <code>~/.cargo/bin</code> or <code>/usr/local/bin</code> will work just as well.</p>
</div>
<div class="paragraph">
<p>Alternatively, you can install it from source using the command below.
You&#8217;ll need the latest stable version of the Rust toolchain.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre><span class="nv">$ </span>git clone https://github.com/rust-analyzer/rust-analyzer.git <span class="o">&amp;&amp;</span> <span class="nb">cd </span>rust-analyzer
<span class="nv">$ </span>cargo xtask <span class="nb">install</span> <span class="nt">--server</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>If your editor can&#8217;t find the binary even though the binary is on your <code>$PATH</code>, the likely explanation is that it doesn&#8217;t see the same <code>$PATH</code> as the shell, see <a href="https://github.com/rust-analyzer/rust-analyzer/issues/1811">this issue</a>.
On Unix, running the editor from a shell or changing the <code>.desktop</code> file to set the environment should help.</p>
</div>
<div class="sect3">
<h4 id="rustup"><a class="anchor" href="#rustup"></a><code>rustup</code></h4>
<div class="paragraph">
<p><code>rust-analyzer</code> is available in <code>rustup</code>, but only in the nightly toolchain:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="nv">$ </span>rustup +nightly component add rust-analyzer-preview
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>However, in contrast to <code>component add clippy</code> or <code>component add rustfmt</code>, this does not actually place a <code>rust-analyzer</code> binary in <code>~/.cargo/bin</code>, see <a href="https://github.com/rust-lang/rustup/issues/2411">this issue</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="arch-linux"><a class="anchor" href="#arch-linux"></a>Arch Linux</h4>
<div class="paragraph">
<p>The <code>rust-analyzer</code> binary can be installed from the repos or AUR (Arch User Repository):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.archlinux.org/packages/community/x86_64/rust-analyzer/"><code>rust-analyzer</code></a> (built from latest tagged source)</p>
</li>
<li>
<p><a href="https://aur.archlinux.org/packages/rust-analyzer-git"><code>rust-analyzer-git</code></a> (latest Git version)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Install it with pacman, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="nv">$ </span>pacman <span class="nt">-S</span> rust-analyzer
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="gentoo-linux"><a class="anchor" href="#gentoo-linux"></a>Gentoo Linux</h4>
<div class="paragraph">
<p><code>rust-analyzer</code> is available in the GURU repository:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://gitweb.gentoo.org/repo/proj/guru.git/tree/dev-util/rust-analyzer?id=9895cea62602cfe599bd48e0fb02127411ca6e81"><code>dev-util/rust-analyzer</code></a> builds from source</p>
</li>
<li>
<p><a href="https://gitweb.gentoo.org/repo/proj/guru.git/tree/dev-util/rust-analyzer-bin?id=9895cea62602cfe599bd48e0fb02127411ca6e81"><code>dev-util/rust-analyzer-bin</code></a> installs an official binary release</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If not already, GURU must be enabled (e.g. using <code>app-eselect/eselect-repository</code>) and sync&#8217;d before running <code>emerge</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre><span class="nv">$ </span>eselect repository <span class="nb">enable </span>guru <span class="o">&amp;&amp;</span> emaint <span class="nb">sync</span> <span class="nt">-r</span> guru
<span class="nv">$ </span>emerge rust-analyzer-bin
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="macos"><a class="anchor" href="#macos"></a>macOS</h4>
<div class="paragraph">
<p>The <code>rust-analyzer</code> binary can be installed via <a href="https://brew.sh/">Homebrew</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="nv">$ </span>brew <span class="nb">install </span>rust-analyzer
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="emacs"><a class="anchor" href="#emacs"></a>Emacs</h3>
<div class="paragraph">
<p>Note this excellent <a href="https://robert.kra.hn/posts/2021-02-07_rust-with-emacs/">guide</a> from <a href="https://github.com/rksm">@rksm</a>.</p>
</div>
<div class="paragraph">
<p>Prerequisites: You have installed the <a href="#rust-analyzer-language-server-binary"><code>rust-analyzer</code> binary</a>.</p>
</div>
<div class="paragraph">
<p>Emacs support is maintained as part of the <a href="https://github.com/emacs-lsp/lsp-mode">Emacs-LSP</a> package in <a href="https://github.com/emacs-lsp/lsp-mode/blob/master/lsp-rust.el">lsp-rust.el</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install the most recent version of <code>emacs-lsp</code> package by following the <a href="https://github.com/emacs-lsp/lsp-mode">Emacs-LSP instructions</a>.</p>
</li>
<li>
<p>Set <code>lsp-rust-server</code> to <code>'rust-analyzer</code>.</p>
</li>
<li>
<p>Run <code>lsp</code> in a Rust buffer.</p>
</li>
<li>
<p>(Optionally) bind commands like <code>lsp-rust-analyzer-join-lines</code>, <code>lsp-extend-selection</code> and <code>lsp-rust-analyzer-expand-macro</code> to keys.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="vimneovim"><a class="anchor" href="#vimneovim"></a>Vim/NeoVim</h3>
<div class="paragraph">
<p>Prerequisites: You have installed the <a href="#rust-analyzer-language-server-binary"><code>rust-analyzer</code> binary</a>.
Not needed if the extension can install/update it on its own, coc-rust-analyzer is one example.</p>
</div>
<div class="paragraph">
<p>The are several LSP client implementations for vim or neovim:</p>
</div>
<div class="sect3">
<h4 id="coc-rust-analyzer"><a class="anchor" href="#coc-rust-analyzer"></a>coc-rust-analyzer</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install coc.nvim by following the instructions at
<a href="https://github.com/neoclide/coc.nvim">coc.nvim</a>
(Node.js required)</p>
</li>
<li>
<p>Run <code>:CocInstall coc-rust-analyzer</code> to install
<a href="https://github.com/fannheyward/coc-rust-analyzer">coc-rust-analyzer</a>,
this extension implements <em>most</em> of the features supported in the VSCode extension:</p>
<div class="ulist">
<ul>
<li>
<p>automatically install and upgrade stable/nightly releases</p>
</li>
<li>
<p>same configurations as VSCode extension, <code>rust-analyzer.server.path</code>, <code>rust-analyzer.cargo.features</code> etc.</p>
</li>
<li>
<p>same commands too, <code>rust-analyzer.analyzerStatus</code>, <code>rust-analyzer.ssr</code> etc.</p>
</li>
<li>
<p>inlay hints for variables and method chaining, <em>Neovim Only</em></p>
</li>
<li>
<p>semantic highlighting is not implemented yet</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Note: for code actions, use <code>coc-codeaction-cursor</code> and <code>coc-codeaction-selected</code>; <code>coc-codeaction</code> and <code>coc-codeaction-line</code> are unlikely to be useful.</p>
</div>
</div>
<div class="sect3">
<h4 id="languageclient-neovim"><a class="anchor" href="#languageclient-neovim"></a>LanguageClient-neovim</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install LanguageClient-neovim by following the instructions
<a href="https://github.com/autozimu/LanguageClient-neovim">here</a></p>
<div class="ulist">
<ul>
<li>
<p>The GitHub project wiki has extra tips on configuration</p>
</li>
</ul>
</div>
</li>
<li>
<p>Configure by adding this to your vim/neovim config file (replacing the existing Rust-specific line if it exists):</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="vim"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">let</span> <span class="nv">g:LanguageClient_serverCommands</span> <span class="p">=</span> <span class="p">{</span>
<span class="se">\</span> <span class="s1">'rust'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'rust-analyzer'</span><span class="p">],</span>
<span class="se">\</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="youcompleteme"><a class="anchor" href="#youcompleteme"></a>YouCompleteMe</h4>
<div class="paragraph">
<p>Install YouCompleteMe by following the instructions
  <a href="https://github.com/ycm-core/YouCompleteMe#installation">here</a>.</p>
</div>
<div class="paragraph">
<p>rust-analyzer is the default in ycm, it should work out of the box.</p>
</div>
</div>
<div class="sect3">
<h4 id="ale"><a class="anchor" href="#ale"></a>ALE</h4>
<div class="paragraph">
<p>To use the LSP server in <a href="https://github.com/dense-analysis/ale">ale</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="vim"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">let</span> <span class="nv">g:ale_linters</span> <span class="p">=</span> <span class="p">{</span><span class="s1">'rust'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'analyzer'</span><span class="p">]}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="nvim-lsp"><a class="anchor" href="#nvim-lsp"></a>nvim-lsp</h4>
<div class="paragraph">
<p>NeoVim 0.5 has built-in language server support.
For a quick start configuration of rust-analyzer, use <a href="https://github.com/neovim/nvim-lspconfig#rust_analyzer">neovim/nvim-lspconfig</a>.
Once <code>neovim/nvim-lspconfig</code> is installed, use <code>lua require'lspconfig'.rust_analyzer.setup({})</code> in your <code>init.vim</code>.</p>
</div>
<div class="paragraph">
<p>You can also pass LSP settings to the server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="vim"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre></td><td class="code"><pre><span class="k">lua</span> <span class="p">&lt;&lt;</span> EOF
local nvim_lsp <span class="p">=</span> require<span class="s1">'lspconfig'</span>

local on_attach <span class="p">=</span> <span class="k">function</span><span class="p">(</span>client<span class="p">)</span>
    require<span class="s1">'completion'</span><span class="p">.</span>on_attach<span class="p">(</span>client<span class="p">)</span>
end

nvim_lsp<span class="p">.</span>rust_analyzer<span class="p">.</span>setup<span class="p">({</span>
    on_attach<span class="p">=</span>on_attach<span class="p">,</span>
    settings <span class="p">=</span> <span class="p">{</span>
        <span class="p">[</span><span class="s2">"rust-analyzer"</span><span class="p">]</span> <span class="p">=</span> <span class="p">{</span>
            assist <span class="p">=</span> <span class="p">{</span>
                importGranularity <span class="p">=</span> <span class="s2">"module"</span><span class="p">,</span>
                importPrefix <span class="p">=</span> <span class="s2">"by_self"</span><span class="p">,</span>
            <span class="p">},</span>
            cargo <span class="p">=</span> <span class="p">{</span>
                loadOutDirsFromCheck <span class="p">=</span> true
            <span class="p">},</span>
            procMacro <span class="p">=</span> <span class="p">{</span>
                enable <span class="p">=</span> true
            <span class="p">},</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">})</span>
EOF
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="https://sharksforarms.dev/posts/neovim-rust/" class="bare">https://sharksforarms.dev/posts/neovim-rust/</a> for more tips on getting started.</p>
</div>
<div class="paragraph">
<p>Check out <a href="https://github.com/simrat39/rust-tools.nvim" class="bare">https://github.com/simrat39/rust-tools.nvim</a> for a batteries included rust-analyzer setup for neovim.</p>
</div>
</div>
<div class="sect3">
<h4 id="vim-lsp"><a class="anchor" href="#vim-lsp"></a>vim-lsp</h4>
<div class="paragraph">
<p>vim-lsp is installed by following <a href="https://github.com/prabirshrestha/vim-lsp">the plugin instructions</a>.
It can be as simple as adding this line to your <code>.vimrc</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="vim"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre>Plug <span class="s1">'prabirshrestha/vim-lsp'</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Next you need to register the <code>rust-analyzer</code> binary.
If it is available in <code>$PATH</code>, you may want to add this to your <code>.vimrc</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="vim"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">if</span> <span class="nb">executable</span><span class="p">(</span><span class="s1">'rust-analyzer'</span><span class="p">)</span>
  <span class="k">au</span> <span class="nb">User</span> lsp_setup <span class="k">call</span> <span class="nb">lsp</span>#register_server<span class="p">({</span>
<span class="se">        \</span>   <span class="s1">'name'</span><span class="p">:</span> <span class="s1">'Rust Language Server'</span><span class="p">,</span>
<span class="se">        \</span>   <span class="s1">'cmd'</span><span class="p">:</span> <span class="p">{</span>server_info<span class="p">-&gt;[</span><span class="s1">'rust-analyzer'</span><span class="p">]},</span>
<span class="se">        \</span>   <span class="s1">'whitelist'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'rust'</span><span class="p">],</span>
<span class="se">        \</span> <span class="p">})</span>
<span class="k">endif</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>There is no dedicated UI for the server configuration, so you would need to send any options as a value of the <code>initialization_options</code> field, as described in the <a href="#_configuration">Configuration</a> section.
Here is an example of how to enable the proc-macro support:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="vim"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
</pre></td><td class="code"><pre><span class="k">if</span> <span class="nb">executable</span><span class="p">(</span><span class="s1">'rust-analyzer'</span><span class="p">)</span>
  <span class="k">au</span> <span class="nb">User</span> lsp_setup <span class="k">call</span> <span class="nb">lsp</span>#register_server<span class="p">({</span>
<span class="se">        \</span>   <span class="s1">'name'</span><span class="p">:</span> <span class="s1">'Rust Language Server'</span><span class="p">,</span>
<span class="se">        \</span>   <span class="s1">'cmd'</span><span class="p">:</span> <span class="p">{</span>server_info<span class="p">-&gt;[</span><span class="s1">'rust-analyzer'</span><span class="p">]},</span>
<span class="se">        \</span>   <span class="s1">'whitelist'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'rust'</span><span class="p">],</span>
<span class="se">        \</span>   <span class="s1">'initialization_options'</span><span class="p">:</span> <span class="p">{</span>
<span class="se">        \</span>     <span class="s1">'cargo'</span><span class="p">:</span> <span class="p">{</span>
<span class="se">        \</span>       <span class="s1">'loadOutDirsFromCheck'</span><span class="p">:</span> <span class="k">v</span><span class="p">:</span>true<span class="p">,</span>
<span class="se">        \</span>     <span class="p">},</span>
<span class="se">        \</span>     <span class="s1">'procMacro'</span><span class="p">:</span> <span class="p">{</span>
<span class="se">        \</span>       <span class="s1">'enable'</span><span class="p">:</span> <span class="k">v</span><span class="p">:</span>true<span class="p">,</span>
<span class="se">        \</span>     <span class="p">},</span>
<span class="se">        \</span>   <span class="p">},</span>
<span class="se">        \</span> <span class="p">})</span>
<span class="k">endif</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sublime-text-3"><a class="anchor" href="#sublime-text-3"></a>Sublime Text 3</h3>
<div class="paragraph">
<p>Prerequisites: You have installed the <a href="#rust-analyzer-language-server-binary"><code>rust-analyzer</code> binary</a>.</p>
</div>
<div class="paragraph">
<p>You also need the <code>LSP</code> package.
To install it:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If you&#8217;ve never installed a Sublime Text package, install Package Control:</p>
<div class="ulist">
<ul>
<li>
<p>Open the command palette (Win/Linux: <code>ctrl+shift+p</code>, Mac: <code>cmd+shift+p</code>)</p>
</li>
<li>
<p>Type <code>Install Package Control</code>, press enter</p>
</li>
</ul>
</div>
</li>
<li>
<p>In the command palette, run <code>Package control: Install package</code>, and in the list that pops up, type <code>LSP</code> and press enter.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Finally, with your Rust project open, in the command palette, run <code>LSP: Enable Language Server In Project</code> or <code>LSP: Enable Language Server Globally</code>, then select <code>rust-analyzer</code> in the list that pops up to enable the rust-analyzer LSP.
The latter means that rust-analyzer is enabled by default in Rust projects.</p>
</div>
<div class="paragraph">
<p>If it worked, you should see "rust-analyzer, Line X, Column Y" on the left side of the bottom bar, and after waiting a bit, functionality like tooltips on hovering over variables should become available.</p>
</div>
<div class="paragraph">
<p>If you get an error saying <code>No such file or directory: 'rust-analyzer'</code>, see the <a href="#rust-analyzer-language-server-binary"><code>rust-analyzer</code> binary</a> section on installing the language server binary.</p>
</div>
</div>
<div class="sect2">
<h3 id="gnome-builder"><a class="anchor" href="#gnome-builder"></a>GNOME Builder</h3>
<div class="paragraph">
<p>GNOME Builder 3.37.1 and newer has native <code>rust-analyzer</code> support.
If the LSP binary is not available, GNOME Builder can install it when opening a Rust file.</p>
</div>
</div>
<div class="sect2">
<h3 id="eclipse-ide"><a class="anchor" href="#eclipse-ide"></a>Eclipse IDE</h3>
<div class="paragraph">
<p>Support for Rust development in the Eclipse IDE is provided by <a href="https://github.com/eclipse/corrosion">Eclipse Corrosion</a>.
If available in PATH or in some standard location, <code>rust-analyzer</code> is detected and powers editing of Rust files without further configuration.
If <code>rust-analyzer</code> is not detected, Corrosion will prompt you for configuration of your Rust toolchain and language server with a link to the <em>Window &gt; Preferences &gt; Rust</em> preference page; from here a button allows to download and configure <code>rust-analyzer</code>, but you can also reference another installation.
You&#8217;ll need to close and reopen all .rs and Cargo files, or to restart the IDE, for this change to take effect.</p>
</div>
</div>
<div class="sect2">
<h3 id="kate-text-editor"><a class="anchor" href="#kate-text-editor"></a>Kate Text Editor</h3>
<div class="paragraph">
<p>Support for the language server protocol is built into Kate through the LSP plugin, which is included by default.
It is preconfigured to use Rls for rust sources, but allows you to use rust-analyzer through a simple settings change.
In the LSP Client settings of Kate, copy the content of the third tab "default parameters" to the second tab "server configuration".
Then in the configuration replace:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="w">        </span><span class="nl">"rust"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"rls"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"rootIndicationFileNames"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Cargo.lock"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Cargo.toml"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://github.com/rust-lang/rls"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"highlightingModeRegex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^Rust$"</span><span class="w">
        </span><span class="p">}</span><span class="err">,</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>With</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="w">        </span><span class="nl">"rust"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"rust-analyzer"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"rootIndicationFileNames"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Cargo.lock"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Cargo.toml"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://github.com/rust-analyzer/rust-analyzer"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"highlightingModeRegex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^Rust$"</span><span class="w">
        </span><span class="p">}</span><span class="err">,</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Then click on apply, and restart the LSP server for your rust project.</p>
</div>
</div>
<div class="sect2">
<h3 id="juci"><a class="anchor" href="#juci"></a>juCi++</h3>
<div class="paragraph">
<p><a href="https://gitlab.com/cppit/jucipp">juCi++</a> has built-in support for the language server protocol, and since version 1.7.0 offers installation of both Rust and rust-analyzer when opening a Rust file.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="troubleshooting"><a class="anchor" href="#troubleshooting"></a>Troubleshooting</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Start with looking at the rust-analyzer version.
Try <strong>Rust Analyzer: Show RA Version</strong> in VS Code and <code>rust-analyzer --version</code> in the command line.
If the date is more than a week ago, it&#8217;s better to update rust-analyzer version.</p>
</div>
<div class="paragraph">
<p>The next thing to check would be panic messages in rust-analyzer&#8217;s log.
Log messages are printed to stderr, in VS Code you can see then in the <code>Output &gt; Rust Analyzer Language Server</code> tab of the panel.
To see more logs, set <code>RA_LOG=info</code> environmental variable.</p>
</div>
<div class="paragraph">
<p>To fully capture LSP messages between the editor and the server, set <code>"rust-analyzer.trace.server": "verbose"</code> config and check
<code>Output &gt; Rust Analyzer Language Server Trace</code>.</p>
</div>
<div class="paragraph">
<p>The root cause for many &#8220;nothing works&#8221; problems is that rust-analyzer fails to understand the project structure.
To debug that, first note the <code>rust-analyzer</code> section in the status bar.
If it has an error icon and red, that&#8217;s the problem (hover will have somewhat helpful error message).
<strong>Rust Analyzer: Status</strong> prints dependency information for the current file.
Finally, <code>RA_LOG=project_model=debug</code> enables verbose logs during project loading.</p>
</div>
<div class="paragraph">
<p>If rust-analyzer outright crashes, try running <code>rust-analyzer analysis-stats /path/to/project/directory/</code> on the command line.
This command type checks the whole project in batch mode bypassing LSP machinery.</p>
</div>
<div class="paragraph">
<p>When filing issues, it is useful (but not necessary) to try to minimize examples.
An ideal bug reproduction looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="nv">$ </span>git clone https://github.com/username/repo.git <span class="o">&amp;&amp;</span> <span class="nb">cd </span>repo <span class="o">&amp;&amp;</span> git switch <span class="nt">--detach</span> commit-hash
<span class="nv">$ </span>rust-analyzer <span class="nt">--version</span>
rust-analyzer dd12184e4 2021-05-08 dev
<span class="nv">$ </span>rust-analyzer analysis-stats <span class="nb">.</span>
💀 💀 💀
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>It is especially useful when the <code>repo</code> doesn&#8217;t use external crates or the standard library.</p>
</div>
<div class="paragraph">
<p>If you want to go as far as to modify the source code to debug the problem, be sure to take a look at the
<a href="https://github.com/rust-analyzer/rust-analyzer/tree/master/docs/dev">dev docs</a>!</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration"><a class="anchor" href="#configuration"></a>Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/rust-analyzer/src/config.rs">config.rs</a></p>
</div>
<div class="paragraph">
<p>The <a href="#_installation">Installation</a> section contains details on configuration for some of the editors.
In general <code>rust-analyzer</code> is configured via LSP messages, which means that it&#8217;s up to the editor to decide on the exact format and location of configuration files.</p>
</div>
<div class="paragraph">
<p>Some clients, such as <a href="#vs-code">VS Code</a> or <a href="#coc-rust-analyzer">COC plugin in Vim</a> provide <code>rust-analyzer</code> specific configuration UIs. Others may require you to know a bit more about the interaction with <code>rust-analyzer</code>.</p>
</div>
<div class="paragraph">
<p>For the later category, it might help to know that the initial configuration is specified as a value of the <code>initializationOptions</code> field of the <a href="https://microsoft.github.io/language-server-protocol/specifications/specification-current/#initialize"><code>InitializeParams</code> message, in the LSP protocol</a>.
The spec says that the field type is <code>any?</code>, but <code>rust-analyzer</code> is looking for a JSON object that is constructed using settings from the list below.
Name of the setting, ignoring the <code>rust-analyzer.</code> prefix, is used as a path, and value of the setting becomes the JSON property value.</p>
</div>
<div class="paragraph">
<p>For example, a very common configuration is to enable proc-macro support, can be achieved by sending this JSON:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"cargo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"loadOutDirsFromCheck"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"procMacro"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"enable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Please consult your editor&#8217;s documentation to learn more about how to configure <a href="https://microsoft.github.io/language-server-protocol/">LSP servers</a>.</p>
</div>
<div class="paragraph">
<p>To verify which configuration is actually used by <code>rust-analyzer</code>, set <code>RA_LOG</code> environment variable to <code>rust_analyzer=info</code> and look for config-related messages.
Logs should show both the JSON that <code>rust-analyzer</code> sees as well as the updated config.</p>
</div>
<div class="paragraph">
<p>This is the list of config options <code>rust-analyzer</code> supports:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a id="rust-analyzer.assist.importGranularity"></a>rust-analyzer.assist.importGranularity (default: <code>"crate"</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>How imports should be grouped into use statements.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.assist.importEnforceGranularity"></a>rust-analyzer.assist.importEnforceGranularity (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to enforce the import granularity setting for all files. If set to false rust-analyzer will try to keep import styles consistent per file.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.assist.importPrefix"></a>rust-analyzer.assist.importPrefix (default: <code>"plain"</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The path structure for newly inserted paths to use.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.assist.importGroup"></a>rust-analyzer.assist.importGroup (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Group inserted imports by the <a href="https://rust-analyzer.github.io/manual.html#auto-import">following order</a>. Groups are separated by newlines.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.assist.allowMergingIntoGlobImports"></a>rust-analyzer.assist.allowMergingIntoGlobImports (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to allow import insertion to merge new imports into single path glob imports like <code>use std::fmt::*;</code>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.cache.warmup"></a>rust-analyzer.cache.warmup (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Warm up caches on project load.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.callInfo.full"></a>rust-analyzer.callInfo.full (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Show function name and docs in parameter hints.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.cargo.autoreload"></a>rust-analyzer.cargo.autoreload (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Automatically refresh project info via <code>cargo metadata</code> on
<code>Cargo.toml</code> changes.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.cargo.allFeatures"></a>rust-analyzer.cargo.allFeatures (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Activate all available features (<code>--all-features</code>).</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.cargo.unsetTest"></a>rust-analyzer.cargo.unsetTest (default: <code>["core"]</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Unsets <code>#[cfg(test)]</code> for the specified crates.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.cargo.features"></a>rust-analyzer.cargo.features (default: <code>[]</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>List of features to activate.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.cargo.runBuildScripts"></a>rust-analyzer.cargo.runBuildScripts (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Run build scripts (<code>build.rs</code>) for more precise code analysis.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.cargo.useRustcWrapperForBuildScripts"></a>rust-analyzer.cargo.useRustcWrapperForBuildScripts (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Use <code>RUSTC_WRAPPER=rust-analyzer</code> when running build scripts to
avoid compiling unnecessary things.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.cargo.noDefaultFeatures"></a>rust-analyzer.cargo.noDefaultFeatures (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Do not activate the <code>default</code> feature.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.cargo.target"></a>rust-analyzer.cargo.target (default: <code>null</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Compilation target (target triple).</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.cargo.noSysroot"></a>rust-analyzer.cargo.noSysroot (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Internal config for debugging, disables loading of sysroot crates.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.checkOnSave.enable"></a>rust-analyzer.checkOnSave.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Run specified <code>cargo check</code> command for diagnostics on save.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.checkOnSave.allFeatures"></a>rust-analyzer.checkOnSave.allFeatures (default: <code>null</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Check with all features (<code>--all-features</code>).
Defaults to <code><mark>rust-analyzer.cargo.allFeatures</mark></code>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.checkOnSave.allTargets"></a>rust-analyzer.checkOnSave.allTargets (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Check all targets and tests (<code>--all-targets</code>).</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.checkOnSave.command"></a>rust-analyzer.checkOnSave.command (default: <code>"check"</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Cargo command to use for <code>cargo check</code>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.checkOnSave.noDefaultFeatures"></a>rust-analyzer.checkOnSave.noDefaultFeatures (default: <code>null</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Do not activate the <code>default</code> feature.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.checkOnSave.target"></a>rust-analyzer.checkOnSave.target (default: <code>null</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Check for a specific target. Defaults to
<code><mark>rust-analyzer.cargo.target</mark></code>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.checkOnSave.extraArgs"></a>rust-analyzer.checkOnSave.extraArgs (default: <code>[]</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Extra arguments for <code>cargo check</code>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.checkOnSave.features"></a>rust-analyzer.checkOnSave.features (default: <code>null</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>List of features to activate. Defaults to
<code><mark>rust-analyzer.cargo.features</mark></code>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.checkOnSave.overrideCommand"></a>rust-analyzer.checkOnSave.overrideCommand (default: <code>null</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Advanced option, fully override the command rust-analyzer uses for
checking. The command should include <code>--message-format=json</code> or
similar option.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.completion.addCallArgumentSnippets"></a>rust-analyzer.completion.addCallArgumentSnippets (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to add argument snippets when completing functions.
Only applies when <code><mark>rust-analyzer.completion.addCallParenthesis</mark></code> is set.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.completion.addCallParenthesis"></a>rust-analyzer.completion.addCallParenthesis (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to add parenthesis when completing functions.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.completion.snippets"></a>rust-analyzer.completion.snippets (default: <code>{}</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Custom completion snippets.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.completion.postfix.enable"></a>rust-analyzer.completion.postfix.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show postfix snippets like <code>dbg</code>, <code>if</code>, <code>not</code>, etc.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.completion.autoimport.enable"></a>rust-analyzer.completion.autoimport.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Toggles the additional completions that automatically add imports when completed.
Note that your client must specify the <code>additionalTextEdits</code> LSP client capability to truly have this feature enabled.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.completion.autoself.enable"></a>rust-analyzer.completion.autoself.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Toggles the additional completions that automatically show method calls and field accesses
with <code>self</code> prefixed to them when inside a method.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.diagnostics.enable"></a>rust-analyzer.diagnostics.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show native rust-analyzer diagnostics.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.diagnostics.enableExperimental"></a>rust-analyzer.diagnostics.enableExperimental (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show experimental rust-analyzer diagnostics that might
have more false positives than usual.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.diagnostics.disabled"></a>rust-analyzer.diagnostics.disabled (default: <code>[]</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>List of rust-analyzer diagnostics to disable.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.diagnostics.remapPrefix"></a>rust-analyzer.diagnostics.remapPrefix (default: <code>{}</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Map of prefixes to be substituted when parsing diagnostic file paths.
This should be the reverse mapping of what is passed to <code>rustc</code> as <code>--remap-path-prefix</code>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.diagnostics.warningsAsHint"></a>rust-analyzer.diagnostics.warningsAsHint (default: <code>[]</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>List of warnings that should be displayed with hint severity.</p>
</div>
<div class="paragraph">
<p>The warnings will be indicated by faded text or three dots in code
and will not show up in the <code>Problems Panel</code>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.diagnostics.warningsAsInfo"></a>rust-analyzer.diagnostics.warningsAsInfo (default: <code>[]</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>List of warnings that should be displayed with info severity.</p>
</div>
<div class="paragraph">
<p>The warnings will be indicated by a blue squiggly underline in code
and a blue icon in the <code>Problems Panel</code>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.experimental.procAttrMacros"></a>rust-analyzer.experimental.procAttrMacros (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Expand attribute macros.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.files.watcher"></a>rust-analyzer.files.watcher (default: <code>"client"</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Controls file watching implementation.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.files.excludeDirs"></a>rust-analyzer.files.excludeDirs (default: <code>[]</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>These directories will be ignored by rust-analyzer. They are
relative to the workspace root, and globs are not supported. You may
also need to add the folders to Code&#8217;s <code>files.watcherExclude</code>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.highlightRelated.references"></a>rust-analyzer.highlightRelated.references (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Enables highlighting of related references while hovering your mouse above any identifier.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.highlightRelated.exitPoints"></a>rust-analyzer.highlightRelated.exitPoints (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Enables highlighting of all exit points while hovering your mouse above any <code>return</code>, <code>?</code>, or return type arrow (<code>&#8594;</code>).</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.highlightRelated.breakPoints"></a>rust-analyzer.highlightRelated.breakPoints (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Enables highlighting of related references while hovering your mouse <code>break</code>, <code>loop</code>, <code>while</code>, or <code>for</code> keywords.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.highlightRelated.yieldPoints"></a>rust-analyzer.highlightRelated.yieldPoints (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Enables highlighting of all break points for a loop or block context while hovering your mouse above any <code>async</code> or <code>await</code> keywords.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.highlighting.strings"></a>rust-analyzer.highlighting.strings (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Use semantic tokens for strings.</p>
</div>
<div class="paragraph">
<p>In some editors (e.g. vscode) semantic tokens override other highlighting grammars.
By disabling semantic tokens for strings, other grammars can be used to highlight
their contents.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.hover.documentation"></a>rust-analyzer.hover.documentation (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show documentation on hover.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.hover.linksInHover"></a>rust-analyzer.hover.linksInHover (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Use markdown syntax for links in hover.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.hoverActions.debug"></a>rust-analyzer.hoverActions.debug (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show <code>Debug</code> action. Only applies when
<code><mark>rust-analyzer.hoverActions.enable</mark></code> is set.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.hoverActions.enable"></a>rust-analyzer.hoverActions.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show HoverActions in Rust files.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.hoverActions.gotoTypeDef"></a>rust-analyzer.hoverActions.gotoTypeDef (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show <code>Go to Type Definition</code> action. Only applies when
<code><mark>rust-analyzer.hoverActions.enable</mark></code> is set.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.hoverActions.implementations"></a>rust-analyzer.hoverActions.implementations (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show <code>Implementations</code> action. Only applies when
<code><mark>rust-analyzer.hoverActions.enable</mark></code> is set.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.hoverActions.references"></a>rust-analyzer.hoverActions.references (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show <code>References</code> action. Only applies when
<code><mark>rust-analyzer.hoverActions.enable</mark></code> is set.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.hoverActions.run"></a>rust-analyzer.hoverActions.run (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show <code>Run</code> action. Only applies when
<code><mark>rust-analyzer.hoverActions.enable</mark></code> is set.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.inlayHints.chainingHints"></a>rust-analyzer.inlayHints.chainingHints (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show inlay type hints for method chains.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.inlayHints.maxLength"></a>rust-analyzer.inlayHints.maxLength (default: <code>25</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Maximum length for inlay hints. Set to null to have an unlimited length.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.inlayHints.parameterHints"></a>rust-analyzer.inlayHints.parameterHints (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show function parameter name inlay hints at the call
site.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.inlayHints.typeHints"></a>rust-analyzer.inlayHints.typeHints (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show inlay type hints for variables.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.inlayHints.hideNamedConstructorHints"></a>rust-analyzer.inlayHints.hideNamedConstructorHints (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to hide inlay hints for constructors.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.joinLines.joinElseIf"></a>rust-analyzer.joinLines.joinElseIf (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Join lines inserts else between consecutive ifs.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.joinLines.removeTrailingComma"></a>rust-analyzer.joinLines.removeTrailingComma (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Join lines removes trailing commas.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.joinLines.unwrapTrivialBlock"></a>rust-analyzer.joinLines.unwrapTrivialBlock (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Join lines unwraps trivial blocks.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.joinLines.joinAssignments"></a>rust-analyzer.joinLines.joinAssignments (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Join lines merges consecutive declaration and initialization of an assignment.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.lens.debug"></a>rust-analyzer.lens.debug (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show <code>Debug</code> lens. Only applies when
<code><mark>rust-analyzer.lens.enable</mark></code> is set.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.lens.enable"></a>rust-analyzer.lens.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show CodeLens in Rust files.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.lens.implementations"></a>rust-analyzer.lens.implementations (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show <code>Implementations</code> lens. Only applies when
<code><mark>rust-analyzer.lens.enable</mark></code> is set.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.lens.run"></a>rust-analyzer.lens.run (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show <code>Run</code> lens. Only applies when
<code><mark>rust-analyzer.lens.enable</mark></code> is set.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.lens.methodReferences"></a>rust-analyzer.lens.methodReferences (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show <code>Method References</code> lens. Only applies when
<code><mark>rust-analyzer.lens.enable</mark></code> is set.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.lens.references"></a>rust-analyzer.lens.references (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show <code>References</code> lens for Struct, Enum, Union and Trait.
Only applies when <code><mark>rust-analyzer.lens.enable</mark></code> is set.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.lens.enumVariantReferences"></a>rust-analyzer.lens.enumVariantReferences (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show <code>References</code> lens for Enum Variants.
Only applies when <code><mark>rust-analyzer.lens.enable</mark></code> is set.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.lens.forceCustomCommands"></a>rust-analyzer.lens.forceCustomCommands (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Internal config: use custom client-side commands even when the
client doesn&#8217;t set the corresponding capability.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.linkedProjects"></a>rust-analyzer.linkedProjects (default: <code>[]</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Disable project auto-discovery in favor of explicitly specified set
of projects.</p>
</div>
<div class="paragraph">
<p>Elements must be paths pointing to <code>Cargo.toml</code>,
<code>rust-project.json</code>, or JSON objects in <code>rust-project.json</code> format.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.lruCapacity"></a>rust-analyzer.lruCapacity (default: <code>null</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Number of syntax trees rust-analyzer keeps in memory. Defaults to 128.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.notifications.cargoTomlNotFound"></a>rust-analyzer.notifications.cargoTomlNotFound (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Whether to show <code>can&#8217;t find Cargo.toml</code> error message.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.procMacro.enable"></a>rust-analyzer.procMacro.enable (default: <code>true</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Enable support for procedural macros, implies <code><mark>rust-analyzer.cargo.runBuildScripts</mark></code>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.procMacro.server"></a>rust-analyzer.procMacro.server (default: <code>null</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Internal config, path to proc-macro server executable (typically,
this is rust-analyzer itself, but we override this in tests).</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.runnables.overrideCargo"></a>rust-analyzer.runnables.overrideCargo (default: <code>null</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Command to be executed instead of 'cargo' for runnables.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.runnables.cargoExtraArgs"></a>rust-analyzer.runnables.cargoExtraArgs (default: <code>[]</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Additional arguments to be passed to cargo for runnables such as
tests or binaries. For example, it may be <code>--release</code>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.rustcSource"></a>rust-analyzer.rustcSource (default: <code>null</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Path to the Cargo.toml of the rust compiler workspace, for usage in rustc_private
projects, or "discover" to try to automatically find it if the <code>rustc-dev</code> component
is installed.</p>
</div>
<div class="paragraph">
<p>Any project which uses rust-analyzer with the rustcPrivate
crates must set <code>[package.metadata.rust-analyzer] rustc_private=true</code> to use it.</p>
</div>
<div class="paragraph">
<p>This option does not take effect until rust-analyzer is restarted.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.rustfmt.extraArgs"></a>rust-analyzer.rustfmt.extraArgs (default: <code>[]</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Additional arguments to <code>rustfmt</code>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.rustfmt.overrideCommand"></a>rust-analyzer.rustfmt.overrideCommand (default: <code>null</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Advanced option, fully override the command rust-analyzer uses for
formatting.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.rustfmt.enableRangeFormatting"></a>rust-analyzer.rustfmt.enableRangeFormatting (default: <code>false</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Enables the use of rustfmt&#8217;s unstable range formatting command for the
<code>textDocument/rangeFormatting</code> request. The rustfmt option is unstable and only
available on a nightly build.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.workspace.symbol.search.scope"></a>rust-analyzer.workspace.symbol.search.scope (default: <code>"workspace"</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Workspace symbol search scope.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><a id="rust-analyzer.workspace.symbol.search.kind"></a>rust-analyzer.workspace.symbol.search.kind (default: <code>"only_types"</code>)</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Workspace symbol search kind.</p>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="non-cargo-based-projects"><a class="anchor" href="#non-cargo-based-projects"></a>Non-Cargo Based Projects</h2>
<div class="sectionbody">
<div class="paragraph">
<p>rust-analyzer does not require Cargo.
However, if you use some other build system, you&#8217;ll have to describe the structure of your project for rust-analyzer in the <code>rust-project.json</code> format:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="TypeScript"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
</pre></td><td class="code"><pre>interface JsonProject {
    /// Path to the directory with *source code* of
    /// sysroot crates.
    ///
    /// It should point to the directory where std,
    /// core, and friends can be found:
    ///
    /// https://github.com/rust-lang/rust/tree/master/library.
    ///
    /// If provided, rust-analyzer automatically adds
    /// dependencies on sysroot crates. Conversely,
    /// if you omit this path, you can specify sysroot
    /// dependencies yourself and, for example, have
    /// several different "sysroots" in one graph of
    /// crates.
    sysroot_src?: string;
    /// The set of crates comprising the current
    /// project. Must include all transitive
    /// dependencies as well as sysroot crate (libstd,
    /// libcore and such).
    crates: Crate[];
}

interface Crate {
    /// Optional crate name used for display purposes,
    /// without affecting semantics. See the `deps`
    /// key for semantically-significant crate names.
    display_name?: string;
    /// Path to the root module of the crate.
    root_module: string;
    /// Edition of the crate.
    edition: "2015" | "2018" | "2021";
    /// Dependencies
    deps: Dep[];
    /// Should this crate be treated as a member of
    /// current "workspace".
    ///
    /// By default, inferred from the `root_module`
    /// (members are the crates which reside inside
    /// the directory opened in the editor).
    ///
    /// Set this to `false` for things like standard
    /// library and 3rd party crates to enable
    /// performance optimizations (rust-analyzer
    /// assumes that non-member crates don't change).
    is_workspace_member?: boolean;
    /// Optionally specify the (super)set of `.rs`
    /// files comprising this crate.
    ///
    /// By default, rust-analyzer assumes that only
    /// files under `root_module.parent` can belong
    /// to a crate. `include_dirs` are included
    /// recursively, unless a subdirectory is in
    /// `exclude_dirs`.
    ///
    /// Different crates can share the same `source`.
    ///
    /// If two crates share an `.rs` file in common,
    /// they *must* have the same `source`.
    /// rust-analyzer assumes that files from one
    /// source can't refer to files in another source.
    source?: {
        include_dirs: string[],
        exclude_dirs: string[],
    },
    /// The set of cfgs activated for a given crate, like
    /// `["unix", "feature=\"foo\"", "feature=\"bar\""]`.
    cfg: string[];
    /// Target triple for this Crate.
    ///
    /// Used when running `rustc --print cfg`
    /// to get target-specific cfgs.
    target?: string;
    /// Environment variables, used for
    /// the `env!` macro
    env: { [key: string]: string; },

    /// Whether the crate is a proc-macro crate.
    is_proc_macro: boolean;
    /// For proc-macro crates, path to compiled
    /// proc-macro (.so file).
    proc_macro_dylib_path?: string;
}

interface Dep {
    /// Index of a crate in the `crates` array.
    crate: number,
    /// Name as should appear in the (implicit)
    /// `extern crate name` declaration.
    name: string,
}
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>This format is provisional and subject to change.
Specifically, the <code>roots</code> setup will be different eventually.</p>
</div>
<div class="paragraph">
<p>There are three ways to feed <code>rust-project.json</code> to rust-analyzer:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Place <code>rust-project.json</code> file at the root of the project, and rust-analyzer will discover it.</p>
</li>
<li>
<p>Specify <code>"rust-analyzer.linkedProjects": [ "path/to/rust-project.json" ]</code> in the settings (and make sure that your LSP client sends settings as a part of initialize request).</p>
</li>
<li>
<p>Specify <code>"rust-analyzer.linkedProjects": [ { "roots": [&#8230;&#8203;], "crates": [&#8230;&#8203;] }]</code> inline.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Relative paths are interpreted relative to <code>rust-project.json</code> file location or (for inline JSON) relative to <code>rootUri</code>.</p>
</div>
<div class="paragraph">
<p>See <a href="https://github.com/rust-analyzer/rust-project.json-example" class="bare">https://github.com/rust-analyzer/rust-project.json-example</a> for a small example.</p>
</div>
<div class="paragraph">
<p>You can set <code>RA_LOG</code> environmental variable to <code>rust_analyzer=info</code> to inspect how rust-analyzer handles config and project loading.</p>
</div>
<div class="paragraph">
<p>Note that calls to <code>cargo check</code> are disabled when using <code>rust-project.json</code> by default, so compilation errors and warnings will no longer be sent to your LSP client. To enable these compilation errors you will need to specify explicitly what command rust-analyzer should run to perform the checks using the <code>checkOnSave.overrideCommand</code> configuration. As an example, the following configuration explicitly sets <code>cargo check</code> as the <code>checkOnSave</code> command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="p">{</span><span class="w"> </span><span class="nl">"rust-analyzer.checkOnSave.overrideCommand"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"cargo"</span><span class="p">,</span><span class="w"> </span><span class="s2">"check"</span><span class="p">,</span><span class="w"> </span><span class="s2">"--message-format=json"</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>checkOnSave.overrideCommand</code> requires the command specified to output json error messages for rust-analyzer to consume. The <code>--message-format=json</code> flag does this for <code>cargo check</code> so whichever command you use must also output errors in this format. See the <a href="#configuration">Configuration</a> section for more information.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="security"><a class="anchor" href="#security"></a>Security</h2>
<div class="sectionbody">
<div class="paragraph">
<p>At the moment, rust-analyzer assumes that all code is trusted.
Here is a <strong>non-exhaustive</strong> list of ways to make rust-analyzer execute arbitrary code:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>proc macros and build scripts are executed by default</p>
</li>
<li>
<p><code>.cargo/config</code> can override <code>rustc</code> with an arbitrary executable</p>
</li>
<li>
<p><code>rust-toolchain.toml</code> can override <code>rustc</code> with an arbitrary executable</p>
</li>
<li>
<p>VS Code plugin reads configuration from project directory, and that can be used to override paths to various executables, like <code>rustfmt</code> or <code>rust-analyzer</code> itself.</p>
</li>
<li>
<p>rust-analyzer&#8217;s syntax trees library uses a lot of <code>unsafe</code> and hasn&#8217;t been properly audited for memory safety.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="privacy"><a class="anchor" href="#privacy"></a>Privacy</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The LSP server performs no network access in itself, but runs <code>cargo metadata</code> which will update or download the crate registry and the source code of the project dependencies.
If enabled (the default), build scripts and procedural macros can do anything.</p>
</div>
<div class="paragraph">
<p>The Code extension automatically connects to GitHub to download updated LSP binaries and, if the nightly channel is selected, to perform update checks using the GitHub API. For <code>rust-analyzer</code> developers, using <code>cargo xtask release</code> uses the same API to put together the release notes.</p>
</div>
<div class="paragraph">
<p>Any other editor plugins are not under the control of the <code>rust-analyzer</code> developers. For any privacy concerns, you should check with their respective developers.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="features"><a class="anchor" href="#features"></a>Features</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="annotations"><a class="anchor" href="#annotations"></a>Annotations</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/annotations.rs#L18">annotations.rs</a></p>
</div>
<div class="paragraph">
<p>Provides user with annotations above items for looking up references or impl blocks
and running/debugging binaries.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113020672-b7c34f00-917a-11eb-8f6e-858735660a0e.png" alt="113020672 b7c34f00 917a 11eb 8f6e 858735660a0e">
</div>
</div>
</div>
<div class="sect2">
<h3 id="auto-import"><a class="anchor" href="#auto-import"></a>Auto Import</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/auto_import.rs#L10">auto_import.rs</a></p>
</div>
<div class="paragraph">
<p>Using the <code>auto-import</code> assist it is possible to insert missing imports for unresolved items.
When inserting an import it will do so in a structured manner by keeping imports grouped,
separated by a newline in the following order:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>std</code> and <code>core</code></p>
</li>
<li>
<p>External Crates</p>
</li>
<li>
<p>Current Crate, paths prefixed by <code>crate</code></p>
</li>
<li>
<p>Current Module, paths prefixed by <code>self</code></p>
</li>
<li>
<p>Super Module, paths prefixed by <code>super</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
</pre></td><td class="code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">fs</span><span class="p">::</span><span class="n">File</span><span class="p">;</span>

<span class="k">use</span> <span class="nn">itertools</span><span class="p">::</span><span class="n">Itertools</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">syntax</span><span class="p">::</span><span class="n">ast</span><span class="p">;</span>

<span class="k">use</span> <span class="nn">crate</span><span class="p">::</span><span class="nn">utils</span><span class="p">::</span><span class="n">insert_use</span><span class="p">;</span>

<span class="k">use</span> <span class="k">self</span><span class="p">::</span><span class="n">auto_import</span><span class="p">;</span>

<span class="k">use</span> <span class="nn">super</span><span class="p">::</span><span class="n">AssistContext</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Import Granularity</div>
<p>It is possible to configure how use-trees are merged with the <code>importGranularity</code> setting.
It has the following configurations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>crate</code>: Merge imports from the same crate into a single use statement. This kind of
nesting is only supported in Rust versions later than 1.24.</p>
</li>
<li>
<p><code>module</code>: Merge imports from the same module into a single use statement.</p>
</li>
<li>
<p><code>item</code>: Don&#8217;t merge imports at all, creating one import per item.</p>
</li>
<li>
<p><code>preserve</code>: Do not change the granularity of any imports. For auto-import this has the same
effect as <code>item</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In <code>VS Code</code> the configuration for this is <code>rust-analyzer.assist.importGranularity</code>.</p>
</div>
<div class="paragraph">
<div class="title">Import Prefix</div>
<p>The style of imports in the same crate is configurable through the <code>importPrefix</code> setting.
It has the following configurations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>by_crate</code>: This setting will force paths to be always absolute, starting with the <code>crate</code>
prefix, unless the item is defined outside of the current crate.</p>
</li>
<li>
<p><code>by_self</code>: This setting will force paths that are relative to the current module to always
start with <code>self</code>. This will result in paths that always start with either <code>crate</code>, <code>self</code>,
<code>super</code> or an extern crate identifier.</p>
</li>
<li>
<p><code>plain</code>: This setting does not impose any restrictions in imports.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In <code>VS Code</code> the configuration for this is <code>rust-analyzer.assist.importPrefix</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113020673-b85be580-917a-11eb-9022-59585f35d4f8.gif" alt="113020673 b85be580 917a 11eb 9022 59585f35d4f8">
</div>
</div>
</div>
<div class="sect2">
<h3 id="completion-with-autoimport"><a class="anchor" href="#completion-with-autoimport"></a>Completion With Autoimport</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_completion/src/completions/flyimport.rs#L17">flyimport.rs</a></p>
</div>
<div class="paragraph">
<p>When completing names in the current scope, proposes additional imports from other modules or crates,
if they can be qualified in the scope, and their name contains all symbols from the completion input.</p>
</div>
<div class="paragraph">
<p>To be considered applicable, the name must contain all input symbols in the given order, not necessarily adjacent.
If any input symbol is not lowercased, the name must contain all symbols in exact case; otherwise the containing is checked case-insensitively.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre>fn main() {
    pda$0
}
# pub mod std { pub mod marker { pub struct PhantomData { } } }
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>&#8594;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre>use std::marker::PhantomData;

fn main() {
    PhantomData
}
# pub mod std { pub mod marker { pub struct PhantomData { } } }
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Also completes associated items, that require trait imports.
If any unresolved and/or partially-qualified path precedes the input, it will be taken into account.
Currently, only the imports with their import path ending with the whole qualifier will be proposed
(no fuzzy matching for qualifier).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
</pre></td><td class="code"><pre>mod foo {
    pub mod bar {
        pub struct Item;

        impl Item {
            pub const TEST_ASSOC: usize = 3;
        }
    }
}

fn main() {
    bar::Item::TEST_A$0
}
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>&#8594;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
</pre></td><td class="code"><pre>use foo::bar;

mod foo {
    pub mod bar {
        pub struct Item;

        impl Item {
            pub const TEST_ASSOC: usize = 3;
        }
    }
}

fn main() {
    bar::Item::TEST_ASSOC
}
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
currently, if an assoc item comes from a trait that&#8217;s not currently imported, and it also has an unresolved and/or partially-qualified path,
no imports will be proposed.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">Fuzzy search details</div>
<p>To avoid an excessive amount of the results returned, completion input is checked for inclusion in the names only
(i.e. in <code>HashMap</code> in the <code>std::collections::HashMap</code> path).
For the same reasons, avoids searching for any path imports for inputs with their length less than 2 symbols
(but shows all associated items for any input length).</p>
</div>
<div class="paragraph">
<div class="title">Import configuration</div>
<p>It is possible to configure how use-trees are merged with the <code>importMergeBehavior</code> setting.
Mimics the corresponding behavior of the <code>Auto Import</code> feature.</p>
</div>
<div class="paragraph">
<div class="title">LSP and performance implications</div>
<p>The feature is enabled only if the LSP client supports LSP protocol version 3.16+ and reports the <code>additionalTextEdits</code>
(case-sensitive) resolve client capability in its client capabilities.
This way the server is able to defer the costly computations, doing them for a selected completion item only.
For clients with no such support, all edits have to be calculated on the completion request, including the fuzzy search completion ones,
which might be slow ergo the feature is automatically disabled.</p>
</div>
<div class="paragraph">
<div class="title">Feature toggle</div>
<p>The feature can be forcefully turned off in the settings with the <code>rust-analyzer.completion.autoimport.enable</code> flag.
Note that having this flag set to <code>true</code> does not guarantee that the feature is enabled: your client needs to have the corresponding
capability enabled.</p>
</div>
</div>
<div class="sect2">
<h3 id="debug-itemtree"><a class="anchor" href="#debug-itemtree"></a>Debug ItemTree</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/view_item_tree.rs#L5">view_item_tree.rs</a></p>
</div>
<div class="paragraph">
<p>Displays the ItemTree of the currently open file, for debugging.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Rust Analyzer: Debug ItemTree</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="expand-macro-recursively"><a class="anchor" href="#expand-macro-recursively"></a>Expand Macro Recursively</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/expand_macro.rs#L15">expand_macro.rs</a></p>
</div>
<div class="paragraph">
<p>Shows the full macro expansion of the macro at current cursor.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Rust Analyzer: Expand macro recursively</strong></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113020648-b3973180-917a-11eb-84a9-ecb921293dc5.gif" alt="113020648 b3973180 917a 11eb 84a9 ecb921293dc5">
</div>
</div>
</div>
<div class="sect2">
<h3 id="expand-and-shrink-selection"><a class="anchor" href="#expand-and-shrink-selection"></a>Expand and Shrink Selection</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/extend_selection.rs#L15">extend_selection.rs</a></p>
</div>
<div class="paragraph">
<p>Extends or shrinks the current selection to the encompassing syntactic construct
(expression, statement, item, module, etc). It works with multiple cursors.</p>
</div>
<div class="paragraph">
<p>This is a standard LSP feature and not a protocol extension.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Shortcut</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Alt</kbd>+<kbd>Shift</kbd>+<kbd>→</kbd></span>, <span class="keyseq"><kbd>Alt</kbd>+<kbd>Shift</kbd>+<kbd>←</kbd></span></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113020651-b42fc800-917a-11eb-8a4f-cf1a07859fac.gif" alt="113020651 b42fc800 917a 11eb 8a4f cf1a07859fac">
</div>
</div>
</div>
<div class="sect2">
<h3 id="file-structure"><a class="anchor" href="#file-structure"></a>File Structure</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/file_structure.rs#L25">file_structure.rs</a></p>
</div>
<div class="paragraph">
<p>Provides a tree of the symbols defined in the file. Can be used to</p>
</div>
<div class="ulist">
<ul>
<li>
<p>fuzzy search symbol in a file (super useful)</p>
</li>
<li>
<p>draw breadcrumbs to describe the context around the cursor</p>
</li>
<li>
<p>draw outline of the file</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Shortcut</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>O</kbd></span></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113020654-b42fc800-917a-11eb-8388-e7dc4d92b02e.gif" alt="113020654 b42fc800 917a 11eb 8388 e7dc4d92b02e">
</div>
</div>
</div>
<div class="sect2">
<h3 id="find-all-references"><a class="anchor" href="#find-all-references"></a>Find All References</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/references.rs#L40">references.rs</a></p>
</div>
<div class="paragraph">
<p>Shows all references of the item at the cursor location</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Shortcut</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Shift</kbd>+<kbd>Alt</kbd>+<kbd>F12</kbd></span></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113020670-b7c34f00-917a-11eb-8003-370ac5f2b3cb.gif" alt="113020670 b7c34f00 917a 11eb 8003 370ac5f2b3cb">
</div>
</div>
</div>
<div class="sect2">
<h3 id="folding"><a class="anchor" href="#folding"></a>Folding</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/folding_ranges.rs#L37">folding_ranges.rs</a></p>
</div>
<div class="paragraph">
<p>Defines folding regions for curly braced blocks, runs of consecutive use, mod, const or static
items, and <code>region</code> / <code>endregion</code> comment markers.</p>
</div>
</div>
<div class="sect2">
<h3 id="format-string-completion"><a class="anchor" href="#format-string-completion"></a>Format String Completion</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_completion/src/completions/postfix/format_like.rs#L0">format_like.rs</a></p>
</div>
<div class="paragraph">
<p><code>"Result {result} is {2 + 2}"</code> is expanded to the <code>"Result {} is {}", result, 2 + 2</code>.</p>
</div>
<div class="paragraph">
<p>The following postfix snippets are available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>format</code> &#8594; <code>format!(&#8230;&#8203;)</code></p>
</li>
<li>
<p><code>panic</code> &#8594; <code>panic!(&#8230;&#8203;)</code></p>
</li>
<li>
<p><code>println</code> &#8594; <code>println!(&#8230;&#8203;)</code></p>
</li>
<li>
<p><code>log</code>:</p>
<div class="ulist">
<ul>
<li>
<p><code>logd</code> &#8594; <code>log::debug!(&#8230;&#8203;)</code></p>
</li>
<li>
<p><code>logt</code> &#8594; <code>log::trace!(&#8230;&#8203;)</code></p>
</li>
<li>
<p><code>logi</code> &#8594; <code>log::info!(&#8230;&#8203;)</code></p>
</li>
<li>
<p><code>logw</code> &#8594; <code>log::warn!(&#8230;&#8203;)</code></p>
</li>
<li>
<p><code>loge</code> &#8594; <code>log::error!(&#8230;&#8203;)</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113020656-b560f500-917a-11eb-87de-02991f61beb8.gif" alt="113020656 b560f500 917a 11eb 87de 02991f61beb8">
</div>
</div>
</div>
<div class="sect2">
<h3 id="go-to-declaration"><a class="anchor" href="#go-to-declaration"></a>Go to Declaration</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/goto_declaration.rs#L10">goto_declaration.rs</a></p>
</div>
<div class="paragraph">
<p>Navigates to the declaration of an identifier.</p>
</div>
</div>
<div class="sect2">
<h3 id="go-to-definition"><a class="anchor" href="#go-to-definition"></a>Go to Definition</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/goto_definition.rs#L16">goto_definition.rs</a></p>
</div>
<div class="paragraph">
<p>Navigates to the definition of an identifier.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Shortcut</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><kbd>F12</kbd></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113065563-025fbe00-91b1-11eb-83e4-a5a703610b23.gif" alt="113065563 025fbe00 91b1 11eb 83e4 a5a703610b23">
</div>
</div>
</div>
<div class="sect2">
<h3 id="go-to-implementation"><a class="anchor" href="#go-to-implementation"></a>Go to Implementation</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/goto_implementation.rs#L12">goto_implementation.rs</a></p>
</div>
<div class="paragraph">
<p>Navigates to the impl block of structs, enums or traits. Also implemented as a code lens.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Shortcut</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Ctrl</kbd>+<kbd>F12</kbd></span></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113065566-02f85480-91b1-11eb-9288-aaad8abd8841.gif" alt="113065566 02f85480 91b1 11eb 9288 aaad8abd8841">
</div>
</div>
</div>
<div class="sect2">
<h3 id="go-to-type-definition"><a class="anchor" href="#go-to-type-definition"></a>Go to Type Definition</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/goto_type_definition.rs#L6">goto_type_definition.rs</a></p>
</div>
<div class="paragraph">
<p>Navigates to the type of an identifier.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>*Go to Type Definition</strong></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113020657-b560f500-917a-11eb-9007-0f809733a338.gif" alt="113020657 b560f500 917a 11eb 9007 0f809733a338">
</div>
</div>
</div>
<div class="sect2">
<h3 id="highlight-related"><a class="anchor" href="#highlight-related"></a>Highlight Related</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/highlight_related.rs#L36">highlight_related.rs</a></p>
</div>
<div class="paragraph">
<p>Highlights constructs related to the thing under the cursor:
- if on an identifier, highlights all references to that identifier in the current file
- if on an <code>async</code> or <code>await token, highlights all yield points for that async context
- if on a `return</code> or <code>fn</code> keyword, <code>?</code> character or <code>&#8594;</code> return type arrow, highlights all exit points for that context
- if on a <code>break</code>, <code>loop</code>, <code>while</code> or <code>for</code> token, highlights all break points for that loop or block context</p>
</div>
<div class="paragraph">
<p>Note: <code>?</code> and <code>&#8594;</code> do not currently trigger this behavior in the VSCode editor.</p>
</div>
</div>
<div class="sect2">
<h3 id="hover"><a class="anchor" href="#hover"></a>Hover</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/hover.rs#L85">hover.rs</a></p>
</div>
<div class="paragraph">
<p>Shows additional information, like the type of an expression or the documentation for a definition when "focusing" code.
Focusing is usually hovering with a mouse, but can also be triggered with a shortcut.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113020658-b5f98b80-917a-11eb-9f88-3dbc27320c95.gif" alt="113020658 b5f98b80 917a 11eb 9f88 3dbc27320c95">
</div>
</div>
</div>
<div class="sect2">
<h3 id="inlay-hints"><a class="anchor" href="#inlay-hints"></a>Inlay Hints</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/inlay_hints.rs#L37">inlay_hints.rs</a></p>
</div>
<div class="paragraph">
<p>rust-analyzer shows additional information inline with the source code.
Editors usually render this using read-only virtual text snippets interspersed with code.</p>
</div>
<div class="paragraph">
<p>rust-analyzer shows hints for</p>
</div>
<div class="ulist">
<ul>
<li>
<p>types of local variables</p>
</li>
<li>
<p>names of function arguments</p>
</li>
<li>
<p>types of chained expressions</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Note:</strong> VS Code does not have native support for inlay hints <a href="https://github.com/microsoft/vscode/issues/16221">yet</a> and the hints are implemented using decorations.
This approach has limitations, the caret movement and bracket highlighting near the edges of the hint may be weird:
<a href="https://github.com/rust-analyzer/rust-analyzer/issues/1623">1</a>, <a href="https://github.com/rust-analyzer/rust-analyzer/issues/3453">2</a>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>*Rust Analyzer: Toggle inlay hints</strong></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113020660-b5f98b80-917a-11eb-8d70-3be3fd558cdd.png" alt="113020660 b5f98b80 917a 11eb 8d70 3be3fd558cdd">
</div>
</div>
</div>
<div class="sect2">
<h3 id="join-lines"><a class="anchor" href="#join-lines"></a>Join Lines</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/join_lines.rs#L20">join_lines.rs</a></p>
</div>
<div class="paragraph">
<p>Join selected lines into one, smartly fixing up whitespace, trailing commas, and braces.</p>
</div>
<div class="paragraph">
<p>See
<a href="https://user-images.githubusercontent.com/1711539/124515923-4504e800-dde9-11eb-8d58-d97945a1a785.gif">this gif</a>
for the cases handled specially by joined lines.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Rust Analyzer: Join lines</strong></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113020661-b6922200-917a-11eb-87c4-b75acc028f11.gif" alt="113020661 b6922200 917a 11eb 87c4 b75acc028f11">
</div>
</div>
</div>
<div class="sect2">
<h3 id="magic-completions"><a class="anchor" href="#magic-completions"></a>Magic Completions</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_completion/src/lib.rs#L37">lib.rs</a></p>
</div>
<div class="paragraph">
<p>In addition to usual reference completion, rust-analyzer provides some ✨magic✨
completions as well:</p>
</div>
<div class="paragraph">
<p>Keywords like <code>if</code>, <code>else</code> <code>while</code>, <code>loop</code> are completed with braces, and cursor
is placed at the appropriate position. Even though <code>if</code> is easy to type, you
still want to complete it, to get ` { }` for free! <code>return</code> is inserted with a
space or <code>;</code> depending on the return type of the function.</p>
</div>
<div class="paragraph">
<p>When completing a function call, <code>()</code> are automatically inserted. If a function
takes arguments, the cursor is positioned inside the parenthesis.</p>
</div>
<div class="paragraph">
<p>There are postfix completions, which can be triggered by typing something like
<code>foo().if</code>. The word after <code>.</code> determines postfix completion. Possible variants are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>expr.if</code> &#8594; <code>if expr {}</code> or <code>if let &#8230;&#8203; {}</code> for <code>Option</code> or <code>Result</code></p>
</li>
<li>
<p><code>expr.match</code> &#8594; <code>match expr {}</code></p>
</li>
<li>
<p><code>expr.while</code> &#8594; <code>while expr {}</code> or <code>while let &#8230;&#8203; {}</code> for <code>Option</code> or <code>Result</code></p>
</li>
<li>
<p><code>expr.ref</code> &#8594; <code>&amp;expr</code></p>
</li>
<li>
<p><code>expr.refm</code> &#8594; <code>&amp;mut expr</code></p>
</li>
<li>
<p><code>expr.let</code> &#8594; <code>let $0 = expr;</code></p>
</li>
<li>
<p><code>expr.letm</code> &#8594; <code>let mut $0 = expr;</code></p>
</li>
<li>
<p><code>expr.not</code> &#8594; <code>!expr</code></p>
</li>
<li>
<p><code>expr.dbg</code> &#8594; <code>dbg!(expr)</code></p>
</li>
<li>
<p><code>expr.dbgr</code> &#8594; <code>dbg!(&amp;expr)</code></p>
</li>
<li>
<p><code>expr.call</code> &#8594; <code>(expr)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There also snippet completions:</p>
</div>
<div class="ulist">
<div class="title">Expressions</div>
<ul>
<li>
<p><code>pd</code> &#8594; <code>eprintln!(" = {:?}", );</code></p>
</li>
<li>
<p><code>ppd</code> &#8594; <code>eprintln!(" = {:#?}", );</code></p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Items</div>
<ul>
<li>
<p><code>tfn</code> &#8594; <code>#[test] fn feature(){}</code></p>
</li>
<li>
<p><code>tmod</code> &#8594;</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="nd">#[cfg(test)]</span>
<span class="k">mod</span> <span class="n">tests</span> <span class="p">{</span>
    <span class="k">use</span> <span class="nn">super</span><span class="p">::</span><span class="o">*</span><span class="p">;</span>

    <span class="nd">#[test]</span>
    <span class="k">fn</span> <span class="nf">test_name</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>And the auto import completions, enabled with the <code>rust-analyzer.completion.autoimport.enable</code> setting and the corresponding LSP client capabilities.
Those are the additional completion options with automatic <code>use</code> import and options from all project importable items,
fuzzy matched against the completion input.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113020667-b72ab880-917a-11eb-8778-716cf26a0eb3.gif" alt="113020667 b72ab880 917a 11eb 8778 716cf26a0eb3">
</div>
</div>
</div>
<div class="sect2">
<h3 id="matching-brace"><a class="anchor" href="#matching-brace"></a>Matching Brace</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/matching_brace.rs#L6">matching_brace.rs</a></p>
</div>
<div class="paragraph">
<p>If the cursor is on any brace (<code>&lt;&gt;(){}[]||</code>) which is a part of a brace-pair,
moves cursor to the matching brace. It uses the actual parser to determine
braces, so it won&#8217;t confuse generics with comparisons.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Rust Analyzer: Find matching brace</strong></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113065573-04298180-91b1-11eb-8dec-d4e2a202f304.gif" alt="113065573 04298180 91b1 11eb 8dec d4e2a202f304">
</div>
</div>
</div>
<div class="sect2">
<h3 id="memory-usage"><a class="anchor" href="#memory-usage"></a>Memory Usage</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_db/src/apply_change.rs#L41">apply_change.rs</a></p>
</div>
<div class="paragraph">
<p>Clears rust-analyzer&#8217;s internal database and prints memory usage statistics.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Rust Analyzer: Memory Usage (Clears Database)</strong></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113065592-08559f00-91b1-11eb-8c96-64b88068ec02.gif" alt="113065592 08559f00 91b1 11eb 8c96 64b88068ec02">
</div>
</div>
</div>
<div class="sect2">
<h3 id="move-item"><a class="anchor" href="#move-item"></a>Move Item</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/move_item.rs#L15">move_item.rs</a></p>
</div>
<div class="paragraph">
<p>Move item under cursor or selection up and down.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Rust Analyzer: Move item up</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Rust Analyzer: Move item down</strong></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113065576-04298180-91b1-11eb-91ce-4505e99ed598.gif" alt="113065576 04298180 91b1 11eb 91ce 4505e99ed598">
</div>
</div>
</div>
<div class="sect2">
<h3 id="on-enter"><a class="anchor" href="#on-enter"></a>On Enter</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/typing/on_enter.rs#L16">on_enter.rs</a></p>
</div>
<div class="paragraph">
<p>rust-analyzer can override <kbd>Enter</kbd> key to make it smarter:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><kbd>Enter</kbd> inside triple-slash comments automatically inserts <code>///</code></p>
</li>
<li>
<p><kbd>Enter</kbd> in the middle or after a trailing space in <code>//</code> inserts <code>//</code></p>
</li>
<li>
<p><kbd>Enter</kbd> inside <code>//!</code> doc comments automatically inserts <code>//!</code></p>
</li>
<li>
<p><kbd>Enter</kbd> after <code>{</code> indents contents and closing <code>}</code> of single-line block</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This action needs to be assigned to shortcut explicitly.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">VS Code</dt>
<dd>
<p>Add the following to <code>keybindings.json</code>:</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Enter"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rust-analyzer.onEnter"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"when"</span><span class="p">:</span><span class="w"> </span><span class="s2">"editorTextFocus &amp;&amp; !suggestWidgetVisible &amp;&amp; editorLangId == rust"</span><span class="w">
</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>When using the Vim plugin:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Enter"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rust-analyzer.onEnter"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"when"</span><span class="p">:</span><span class="w"> </span><span class="s2">"editorTextFocus &amp;&amp; !suggestWidgetVisible &amp;&amp; editorLangId == rust &amp;&amp; vim.mode == 'Insert'"</span><span class="w">
</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113065578-04c21800-91b1-11eb-82b8-22b8c481e645.gif" alt="113065578 04c21800 91b1 11eb 82b8 22b8c481e645">
</div>
</div>
</div>
<div class="sect2">
<h3 id="on-typing-assists"><a class="anchor" href="#on-typing-assists"></a>On Typing Assists</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/typing.rs#L39">typing.rs</a></p>
</div>
<div class="paragraph">
<p>Some features trigger on typing certain characters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>typing <code>let =</code> tries to smartly add <code>;</code> if <code>=</code> is followed by an existing expression</p>
</li>
<li>
<p>typing <code>.</code> in a chain method call auto-indents</p>
</li>
<li>
<p>typing <code>{</code> in front of an expression inserts a closing <code>}</code> after the expression</p>
<div class="dlist">
<dl>
<dt class="hdlist1">VS Code</dt>
<dd>
<p>Add the following to <code>settings.json</code>:</p>
</dd>
</dl>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>"editor.formatOnType": true,</pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113166163-69758500-923a-11eb-81ee-eb33ec380399.gif" alt="113166163 69758500 923a 11eb 81ee eb33ec380399">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113171066-105c2000-923f-11eb-87ab-f4a263346567.gif" alt="113171066 105c2000 923f 11eb 87ab f4a263346567">
</div>
</div>
</div>
<div class="sect2">
<h3 id="parent-module"><a class="anchor" href="#parent-module"></a>Parent Module</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/parent_module.rs#L14">parent_module.rs</a></p>
</div>
<div class="paragraph">
<p>Navigates to the parent module of the current module.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Rust Analyzer: Locate parent module</strong></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113065580-04c21800-91b1-11eb-9a32-00086161c0bd.gif" alt="113065580 04c21800 91b1 11eb 9a32 00086161c0bd">
</div>
</div>
</div>
<div class="sect2">
<h3 id="related-tests"><a class="anchor" href="#related-tests"></a>Related Tests</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/runnables.rs#L192">runnables.rs</a></p>
</div>
<div class="paragraph">
<p>Provides a sneak peek of all tests where the current item is used.</p>
</div>
<div class="paragraph">
<p>The simplest way to use this feature is via the context menu:
 - Right-click on the selected item. The context menu opens.
 - Select <strong>Peek related tests</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Rust Analyzer: Peek related tests</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="rename"><a class="anchor" href="#rename"></a>Rename</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/rename.rs#L65">rename.rs</a></p>
</div>
<div class="paragraph">
<p>Renames the item below the cursor and all of its references</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Shortcut</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><kbd>F2</kbd></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113065582-055aae80-91b1-11eb-8ade-2b58e6d81883.gif" alt="113065582 055aae80 91b1 11eb 8ade 2b58e6d81883">
</div>
</div>
</div>
<div class="sect2">
<h3 id="run"><a class="anchor" href="#run"></a>Run</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/runnables.rs#L114">runnables.rs</a></p>
</div>
<div class="paragraph">
<p>Shows a popup suggesting to run a test/benchmark/binary <strong>at the current cursor
location</strong>. Super useful for repeatedly running just a single test. Do bind this
to a shortcut!</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Rust Analyzer: Run</strong></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113065583-055aae80-91b1-11eb-958f-d67efcaf6a2f.gif" alt="113065583 055aae80 91b1 11eb 958f d67efcaf6a2f">
</div>
</div>
</div>
<div class="sect2">
<h3 id="semantic-syntax-highlighting"><a class="anchor" href="#semantic-syntax-highlighting"></a>Semantic Syntax Highlighting</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/syntax_highlighting.rs#L42">syntax_highlighting.rs</a></p>
</div>
<div class="paragraph">
<p>rust-analyzer highlights the code semantically.
For example, <code>Bar</code> in <code>foo::Bar</code> might be colored differently depending on whether <code>Bar</code> is an enum or a trait.
rust-analyzer does not specify colors directly, instead it assigns a tag (like <code>struct</code>) and a set of modifiers (like <code>declaration</code>) to each token.
It&#8217;s up to the client to map those to specific colors.</p>
</div>
<div class="paragraph">
<p>The general rule is that a reference to an entity gets colored the same way as the entity itself.
We also give special modifier for <code>mut</code> and <code>&amp;mut</code> local variables.</p>
</div>
<div class="paragraph">
<div class="title">Token Tags</div>
<p>Rust-analyzer currently emits the following token tags:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For items:</p>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
enum
</td>
<td class="hdlist2">
<p>Emitted for enums.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
function
</td>
<td class="hdlist2">
<p>Emitted for free-standing functions.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
macro
</td>
<td class="hdlist2">
<p>Emitted for macros.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method
</td>
<td class="hdlist2">
<p>Emitted for associated functions, also knowns as methods.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
namespace
</td>
<td class="hdlist2">
<p>Emitted for modules.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
struct
</td>
<td class="hdlist2">
<p>Emitted for structs.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
trait
</td>
<td class="hdlist2">
<p>Emitted for traits.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
typeAlias
</td>
<td class="hdlist2">
<p>Emitted for type aliases and <code>Self</code> in `impl`s.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
union
</td>
<td class="hdlist2">
<p>Emitted for unions.</p>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>For literals:</p>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
boolean
</td>
<td class="hdlist2">
<p>Emitted for the boolean literals <code>true</code> and <code>false</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
character
</td>
<td class="hdlist2">
<p>Emitted for character literals.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
number
</td>
<td class="hdlist2">
<p>Emitted for numeric literals.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
string
</td>
<td class="hdlist2">
<p>Emitted for string literals.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
escapeSequence
</td>
<td class="hdlist2">
<p>Emitted for escaped sequences inside strings like <code>\n</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
formatSpecifier
</td>
<td class="hdlist2">
<p>Emitted for format specifiers <code>{:?}</code> in <code>format!</code>-like macros.</p>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>For operators:</p>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
operator
</td>
<td class="hdlist2">
<p>Emitted for general operators.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
arithmetic
</td>
<td class="hdlist2">
<p>Emitted for the arithmetic operators <code>+</code>, <code>-</code>, <code><strong></code>, <code>/</code>, <code>+=</code>, <code>-=</code>, <code></strong>=</code>, <code>/=</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
bitwise
</td>
<td class="hdlist2">
<p>Emitted for the bitwise operators <code>|</code>, <code>&amp;</code>, <code>!</code>, <code>^</code>, <code>|=</code>, <code>&amp;=</code>, <code>^=</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
comparison
</td>
<td class="hdlist2">
<p>Emitted for the comparison operators <code>&gt;</code>, <code>&lt;</code>, <code>==</code>, <code>&gt;=</code>, <code>&#8656;</code>, <code>!=</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
logical
</td>
<td class="hdlist2">
<p>Emitted for the logical operators <code>||</code>, <code>&amp;&amp;</code>, <code>!</code>.</p>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>For punctuation:</p>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
punctuation
</td>
<td class="hdlist2">
<p>Emitted for general punctuation.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
angle
</td>
<td class="hdlist2">
<p>Emitted for <code>&lt;&gt;</code> angle brackets.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
brace
</td>
<td class="hdlist2">
<p>Emitted for <code>{}</code> braces.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
bracket
</td>
<td class="hdlist2">
<p>Emitted for <code>[]</code> brackets.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
parenthesis
</td>
<td class="hdlist2">
<p>Emitted for <code>()</code> parentheses.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
colon
</td>
<td class="hdlist2">
<p>Emitted for the <code>:</code> token.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
comma
</td>
<td class="hdlist2">
<p>Emitted for the <code>,</code> token.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
dot
</td>
<td class="hdlist2">
<p>Emitted for the <code>.</code> token.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Semi
</td>
<td class="hdlist2">
<p>Emitted for the <code>;</code> token.</p>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
attribute
</td>
<td class="hdlist2">
<p>Emitted for the <code>#[</code> <code>]</code> tokens.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
builtinAttribute
</td>
<td class="hdlist2">
<p>Emitted for names to builtin attributes in attribute path, the <code>repr</code> in <code>#[repr(u8)]</code> for example.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
builtinType
</td>
<td class="hdlist2">
<p>Emitted for builtin types like <code>u32</code>, <code>str</code> and <code>f32</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
comment
</td>
<td class="hdlist2">
<p>Emitted for comments.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
constParameter
</td>
<td class="hdlist2">
<p>Emitted for const parameters.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
enumMember
</td>
<td class="hdlist2">
<p>Emitted for enum variants.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
generic
</td>
<td class="hdlist2">
<p>Emitted for generic tokens that have no mapping.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
keyword
</td>
<td class="hdlist2">
<p>Emitted for keywords.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
label
</td>
<td class="hdlist2">
<p>Emitted for labels.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
lifetime
</td>
<td class="hdlist2">
<p>Emitted for lifetimes.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
parameter
</td>
<td class="hdlist2">
<p>Emitted for non-self function parameters.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
property
</td>
<td class="hdlist2">
<p>Emitted for struct and union fields.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
selfKeyword
</td>
<td class="hdlist2">
<p>Emitted for the self function parameter and self path-specifier.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
typeParameter
</td>
<td class="hdlist2">
<p>Emitted for type parameters.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
unresolvedReference
</td>
<td class="hdlist2">
<p>Emitted for unresolved references, names that rust-analyzer can&#8217;t find the definition of.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
variable
</td>
<td class="hdlist2">
<p>Emitted for locals, constants and statics.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">Token Modifiers</div>
<p>Token modifiers allow to style some elements in the source code more precisely.</p>
</div>
<div class="paragraph">
<p>Rust-analyzer currently emits the following token modifiers:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
async
</td>
<td class="hdlist2">
<p>Emitted for async functions and the <code>async</code> and <code>await</code> keywords.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
attribute
</td>
<td class="hdlist2">
<p>Emitted for tokens inside attributes.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
callable
</td>
<td class="hdlist2">
<p>Emitted for locals whose types implements one of the <code>Fn*</code> traits.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
constant
</td>
<td class="hdlist2">
<p>Emitted for consts.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
consuming
</td>
<td class="hdlist2">
<p>Emitted for locals that are being consumed when use in a function call.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
controlFlow
</td>
<td class="hdlist2">
<p>Emitted for control-flow related tokens, this includes the <code>?</code> operator.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
crateRoot
</td>
<td class="hdlist2">
<p>Emitted for crate names, like <code>serde</code> and <code>crate</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
declaration
</td>
<td class="hdlist2">
<p>Emitted for names of definitions, like <code>foo</code> in <code>fn foo() {}</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
defaultLibrary
</td>
<td class="hdlist2">
<p>Emitted for items from built-in crates (std, core, alloc, test and proc_macro).</p>
</td>
</tr>
<tr>
<td class="hdlist1">
documentation
</td>
<td class="hdlist2">
<p>Emitted for documentation comments.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
injected
</td>
<td class="hdlist2">
<p>Emitted for doc-string injected highlighting like rust source blocks in documentation.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
intraDocLink
</td>
<td class="hdlist2">
<p>Emitted for intra doc links in doc-strings.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
library
</td>
<td class="hdlist2">
<p>Emitted for items that are defined outside of the current crate.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
mutable
</td>
<td class="hdlist2">
<p>Emitted for mutable locals and statics as well as functions taking <code>&amp;mut self</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
public
</td>
<td class="hdlist2">
<p>Emitted for items that are from the current crate and are <code>pub</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
reference
</td>
<td class="hdlist2">
<p>Emitted for locals behind a reference and functions taking <code>self</code> by reference.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
static
</td>
<td class="hdlist2">
<p>Emitted for "static" functions, also known as functions that do not take a <code>self</code> param, as well as statics and consts.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
trait
</td>
<td class="hdlist2">
<p>Emitted for associated trait items.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
unsafe
</td>
<td class="hdlist2">
<p>Emitted for unsafe operations, like unsafe function calls, as well as the <code>unsafe</code> token.</p>
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113164457-06cfb980-9239-11eb-819b-0f93e646acf8.png" alt="113164457 06cfb980 9239 11eb 819b 0f93e646acf8">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113187625-f7f50100-9250-11eb-825e-91c58f236071.png" alt="113187625 f7f50100 9250 11eb 825e 91c58f236071">
</div>
</div>
</div>
<div class="sect2">
<h3 id="show-syntax-tree"><a class="anchor" href="#show-syntax-tree"></a>Show Syntax Tree</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/syntax_tree.rs#L7">syntax_tree.rs</a></p>
</div>
<div class="paragraph">
<p>Shows the parse tree of the current file. It exists mostly for debugging
rust-analyzer itself.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Rust Analyzer: Show Syntax Tree</strong></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113065586-068bdb80-91b1-11eb-9507-fee67f9f45a0.gif" alt="113065586 068bdb80 91b1 11eb 9507 fee67f9f45a0">
</div>
</div>
</div>
<div class="sect2">
<h3 id="status"><a class="anchor" href="#status"></a>Status</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/status.rs#L26">status.rs</a></p>
</div>
<div class="paragraph">
<p>Shows internal statistic about memory usage of rust-analyzer.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Rust Analyzer: Status</strong></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113065584-05f34500-91b1-11eb-98cc-5c196f76be7f.gif" alt="113065584 05f34500 91b1 11eb 98cc 5c196f76be7f">
</div>
</div>
</div>
<div class="sect2">
<h3 id="structural-search-and-replace"><a class="anchor" href="#structural-search-and-replace"></a>Structural Search and Replace</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_ssr/src/lib.rs#L6">lib.rs</a></p>
</div>
<div class="paragraph">
<p>Search and replace with named wildcards that will match any expression, type, path, pattern or item.
The syntax for a structural search replace command is <code>&lt;search_pattern&gt; =&#8658;&gt; &lt;replace_pattern&gt;</code>.
A <code>$&lt;name&gt;</code> placeholder in the search pattern will match any AST node and <code>$&lt;name&gt;</code> will reference it in the replacement.
Within a macro call, a placeholder will match up until whatever token follows the placeholder.</p>
</div>
<div class="paragraph">
<p>All paths in both the search pattern and the replacement template must resolve in the context
in which this command is invoked. Paths in the search pattern will then match the code if they
resolve to the same item, even if they&#8217;re written differently. For example if we invoke the
command in the module <code>foo</code> with a pattern of <code>Bar</code>, then code in the parent module that refers
to <code>foo::Bar</code> will match.</p>
</div>
<div class="paragraph">
<p>Paths in the replacement template will be rendered appropriately for the context in which the
replacement occurs. For example if our replacement template is <code>foo::Bar</code> and we match some
code in the <code>foo</code> module, we&#8217;ll insert just <code>Bar</code>.</p>
</div>
<div class="paragraph">
<p>Inherent method calls should generally be written in UFCS form. e.g. <code>foo::Bar::baz($s, $a)</code> will
match <code>$s.baz($a)</code>, provided the method call <code>baz</code> resolves to the method <code>foo::Bar::baz</code>. When a
placeholder is the receiver of a method call in the search pattern (e.g. <code>$s.foo()</code>), but not in
the replacement template (e.g. <code>bar($s)</code>), then *, &amp; and &amp;mut will be added as needed to mirror
whatever autoderef and autoref was happening implicitly in the matched code.</p>
</div>
<div class="paragraph">
<p>The scope of the search / replace will be restricted to the current selection if any, otherwise
it will apply to the whole workspace.</p>
</div>
<div class="paragraph">
<p>Placeholders may be given constraints by writing them as <code>${&lt;name&gt;:&lt;constraint1&gt;:&lt;constraint2&gt;&#8230;&#8203;}</code>.</p>
</div>
<div class="paragraph">
<p>Supported constraints:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Constraint</th>
<th class="tableblock halign-left valign-top">Restricts placeholder</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">kind(literal)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Is a literal (e.g. <code>42</code> or <code>"forty two"</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">not(a)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Negates the constraint <code>a</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Available via the command <code>rust-analyzer.ssr</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="c">// Using structural search replace command [foo($a, $b) ==&gt;&gt; ($a).foo($b)]</span>

<span class="c">// BEFORE</span>
<span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="nf">foo</span><span class="p">(</span><span class="n">y</span> <span class="o">+</span> <span class="mi">5</span><span class="p">,</span> <span class="n">z</span><span class="p">))</span>

<span class="c">// AFTER</span>
<span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">((</span><span class="n">y</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span><span class="nf">.foo</span><span class="p">(</span><span class="n">z</span><span class="p">))</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Rust Analyzer: Structural Search Replace</strong></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Also available as an assist, by writing a comment containing the structural
search and replace rule. You will only see the assist if the comment can
be parsed as a valid structural search and replace rule.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre><span class="c">// Place the cursor on the line below to see the assist 💡.</span>
<span class="c">// foo($a, $b) ==&gt;&gt; ($a).foo($b)</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="user-snippet-completions"><a class="anchor" href="#user-snippet-completions"></a>User Snippet Completions</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_completion/src/snippet.rs#L7">snippet.rs</a></p>
</div>
<div class="paragraph">
<p>rust-analyzer allows the user to define custom (postfix)-snippets that may depend on items to be accessible for the current scope to be applicable.</p>
</div>
<div class="paragraph">
<p>A custom snippet can be defined by adding it to the <code>rust-analyzer.completion.snippets</code> object respectively.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
</pre></td><td class="code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"rust-analyzer.completion.snippets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"thread spawn"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"prefix"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"spawn"</span><span class="p">,</span><span class="w"> </span><span class="s2">"tspawn"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"thread::spawn(move || {"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"</span><span class="se">\t</span><span class="s2">$0"</span><span class="p">,</span><span class="w">
        </span><span class="s2">")};"</span><span class="p">,</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Insert a thread::spawn call"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"requires"</span><span class="p">:</span><span class="w"> </span><span class="s2">"std::thread"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"expr"</span><span class="p">,</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the example above:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>"thread spawn"</code> is the name of the snippet.</p>
</li>
<li>
<p><code>prefix</code> defines one or more trigger words that will trigger the snippets completion.
Using <code>postfix</code> will instead create a postfix snippet.</p>
</li>
<li>
<p><code>body</code> is one or more lines of content joined via newlines for the final output.</p>
</li>
<li>
<p><code>description</code> is an optional description of the snippet, if unset the snippet name will be used.</p>
</li>
<li>
<p><code>requires</code> is an optional list of item paths that have to be resolvable in the current crate where the completion is rendered.
On failure of resolution the snippet won&#8217;t be applicable, otherwise the snippet will insert an import for the items on insertion if
the items aren&#8217;t yet in scope.</p>
</li>
<li>
<p><code>scope</code> is an optional filter for when the snippet should be applicable. Possible values are:</p>
<div class="ulist">
<ul>
<li>
<p>for Snippet-Scopes: <code>expr</code>, <code>item</code> (default: <code>item</code>)</p>
</li>
<li>
<p>for Postfix-Snippet-Scopes: <code>expr</code>, <code>type</code> (default: <code>expr</code>)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>body</code> field also has access to placeholders as visible in the example as <code>$0</code>.
These placeholders take the form of <code>$number</code> or <code>${number:placeholder_text}</code> which can be traversed as tabstop in ascending order starting from 1,
with <code>$0</code> being a special case that always comes last.</p>
</div>
<div class="paragraph">
<p>There is also a special placeholder, <code>${receiver}</code>, which will be replaced by the receiver expression for postfix snippets, or nothing in case of normal snippets.
It does not act as a tabstop.</p>
</div>
</div>
<div class="sect2">
<h3 id="view-crate-graph"><a class="anchor" href="#view-crate-graph"></a>View Crate Graph</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/view_crate_graph.rs#L10">view_crate_graph.rs</a></p>
</div>
<div class="paragraph">
<p>Renders the currently loaded crate graph as an SVG graphic. Requires the <code>dot</code> tool, which
is part of graphviz, to be installed.</p>
</div>
<div class="paragraph">
<p>Only workspace crates are included, no crates.io dependencies or sysroot crates.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Rust Analyzer: View Crate Graph</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="view-hir"><a class="anchor" href="#view-hir"></a>View Hir</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/view_hir.rs#L6">view_hir.rs</a></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Rust Analyzer: View Hir</strong></p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/48062697/113065588-068bdb80-91b1-11eb-9a78-0b4ef1e972fb.gif" alt="113065588 068bdb80 91b1 11eb 9a78 0b4ef1e972fb">
</div>
</div>
</div>
<div class="sect2">
<h3 id="workspace-symbol"><a class="anchor" href="#workspace-symbol"></a>Workspace Symbol</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_db/src/symbol_index.rs#L148">symbol_index.rs</a></p>
</div>
<div class="paragraph">
<p>Uses fuzzy-search to find types, modules and functions by name across your
project and dependencies. This is <strong>the</strong> most useful feature, which improves code
navigation tremendously. It mostly works on top of the built-in LSP
functionality, however <code>#</code> and <code>*</code> symbols can be used to narrow down the
search. Specifically,</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Foo</code> searches for <code>Foo</code> type in the current workspace</p>
</li>
<li>
<p><code>foo#</code> searches for <code>foo</code> function in the current workspace</p>
</li>
<li>
<p><code>Foo*</code> searches for <code>Foo</code> type among dependencies, including <code>stdlib</code></p>
</li>
<li>
<p><code>foo#*</code> searches for <code>foo</code> function among dependencies</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>That is, <code>#</code> switches from "types" to all symbols, <code>*</code> switches from the current
workspace to dependencies.</p>
</div>
<div class="paragraph">
<p>Note that filtering does not currently work in VSCode due to the editor never
sending the special symbols to the language server. Instead, you can configure
the filtering via the <code>rust-analyzer.workspace.symbol.search.scope</code> and
<code>rust-analyzer.workspace.symbol.search.kind</code> settings.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Shortcut</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Ctrl</kbd>+<kbd>T</kbd></span></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assists-code-actions"><a class="anchor" href="#assists-code-actions"></a>Assists (Code Actions)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Assists, or code actions, are small local refactorings, available in a particular context.
They are usually triggered by a shortcut or by clicking a light bulb icon in the editor.
Cursor position or selection is signified by <code>┃</code> character.</p>
</div>
<h3 id="add_explicit_type" class="discrete"><code>add_explicit_type</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/add_explicit_type.rs#L7">add_explicit_type.rs</a></p>
</div>
<div class="paragraph">
<p>Specify type for a let binding.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">x</span><span class="err">┃</span> <span class="o">=</span> <span class="mi">92</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">x</span><span class="p">:</span> <span class="nb">i32</span> <span class="o">=</span> <span class="mi">92</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="add_hash" class="discrete"><code>add_hash</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/raw_string.rs#L91">raw_string.rs</a></p>
</div>
<div class="paragraph">
<p>Adds a hash to a raw string literal.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="s">r#"Hello,┃ World!"#</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="s">r##"Hello, World!"##</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="add_impl_default_members" class="discrete"><code>add_impl_default_members</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/add_missing_impl_members.rs#L55">add_missing_impl_members.rs</a></p>
</div>
<div class="paragraph">
<p>Adds scaffold for overriding default impl members.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
</pre></td><td class="code"><pre><span class="k">trait</span> <span class="n">Trait</span> <span class="p">{</span>
    <span class="k">type</span> <span class="n">X</span><span class="p">;</span>
    <span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">);</span>
    <span class="k">fn</span> <span class="nf">bar</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="n">Trait</span> <span class="k">for</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">type</span> <span class="n">X</span> <span class="o">=</span> <span class="p">();</span>
    <span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="p">{}</span><span class="err">┃</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
</pre></td><td class="code"><pre><span class="k">trait</span> <span class="n">Trait</span> <span class="p">{</span>
    <span class="k">type</span> <span class="n">X</span><span class="p">;</span>
    <span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">);</span>
    <span class="k">fn</span> <span class="nf">bar</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="n">Trait</span> <span class="k">for</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">type</span> <span class="n">X</span> <span class="o">=</span> <span class="p">();</span>
    <span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="p">{}</span>

    <span class="err">┃</span><span class="k">fn</span> <span class="nf">bar</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="add_impl_missing_members" class="discrete"><code>add_impl_missing_members</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/add_missing_impl_members.rs#L14">add_missing_impl_members.rs</a></p>
</div>
<div class="paragraph">
<p>Adds scaffold for required impl members.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="k">trait</span> <span class="n">Trait</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">type</span> <span class="n">X</span><span class="p">;</span>
    <span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">T</span><span class="p">;</span>
    <span class="k">fn</span> <span class="nf">bar</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="n">Trait</span><span class="o">&lt;</span><span class="nb">u32</span><span class="o">&gt;</span> <span class="k">for</span> <span class="p">()</span> <span class="p">{</span><span class="err">┃</span>

<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
</pre></td><td class="code"><pre><span class="k">trait</span> <span class="n">Trait</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">type</span> <span class="n">X</span><span class="p">;</span>
    <span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">T</span><span class="p">;</span>
    <span class="k">fn</span> <span class="nf">bar</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="n">Trait</span><span class="o">&lt;</span><span class="nb">u32</span><span class="o">&gt;</span> <span class="k">for</span> <span class="p">()</span> <span class="p">{</span>
    <span class="err">┃</span><span class="k">type</span> <span class="n">X</span><span class="p">;</span>

    <span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">u32</span> <span class="p">{</span>
        <span class="nd">todo!</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="add_lifetime_to_type" class="discrete"><code>add_lifetime_to_type</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/add_lifetime_to_type.rs#L5">add_lifetime_to_type.rs</a></p>
</div>
<div class="paragraph">
<p>Adds a new lifetime to a struct, enum or union.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Point</span> <span class="p">{</span>
    <span class="n">x</span><span class="p">:</span> <span class="o">&amp;</span><span class="err">┃</span><span class="nb">u32</span><span class="p">,</span>
    <span class="n">y</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Point</span><span class="o">&lt;</span><span class="nv">'a</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="n">x</span><span class="p">:</span> <span class="o">&amp;</span><span class="nv">'a</span> <span class="nb">u32</span><span class="p">,</span>
    <span class="n">y</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="add_missing_match_arms" class="discrete"><code>add_missing_match_arms</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/add_missing_match_arms.rs#L15">add_missing_match_arms.rs</a></p>
</div>
<div class="paragraph">
<p>Adds missing clauses to a <code>match</code> expression.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">match</span> <span class="n">action</span> <span class="p">{</span>
        <span class="err">┃</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">match</span> <span class="n">action</span> <span class="p">{</span>
        <span class="err">┃</span><span class="nn">Action</span><span class="p">::</span><span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span> <span class="p">}</span> <span class="k">=&gt;</span> <span class="nd">todo!</span><span class="p">(),</span>
        <span class="nn">Action</span><span class="p">::</span><span class="n">Stop</span> <span class="k">=&gt;</span> <span class="nd">todo!</span><span class="p">(),</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="add_return_type" class="discrete"><code>add_return_type</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/add_return_type.rs#L6">add_return_type.rs</a></p>
</div>
<div class="paragraph">
<p>Adds the return type to a function or closure inferred from its tail expression if it doesn&#8217;t have a return
type specified. This assists is useable in a functions or closures tail expression or return type position.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{</span> <span class="mi">4</span><span class="err">┃</span><span class="mi">2i32</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="nb">i32</span> <span class="p">{</span> <span class="mi">42i32</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="add_turbo_fish" class="discrete"><code>add_turbo_fish</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/add_turbo_fish.rs#L9">add_turbo_fish.rs</a></p>
</div>
<div class="paragraph">
<p>Adds <code>::&lt;_&gt;</code> to a call of a generic method or function.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="n">make</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">T</span> <span class="p">{</span> <span class="nd">todo!</span><span class="p">()</span> <span class="p">}</span>
<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">x</span> <span class="o">=</span> <span class="n">make</span><span class="err">┃</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="n">make</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">T</span> <span class="p">{</span> <span class="nd">todo!</span><span class="p">()</span> <span class="p">}</span>
<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">x</span> <span class="o">=</span> <span class="nn">make</span><span class="p">::</span><span class="o">&lt;</span><span class="err">$</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span><span class="mi">_</span><span class="p">}</span><span class="o">&gt;</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="apply_demorgan" class="discrete"><code>apply_demorgan</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/apply_demorgan.rs#L7">apply_demorgan.rs</a></p>
</div>
<div class="paragraph">
<p>Apply <a href="https://en.wikipedia.org/wiki/De_Morgan%27s_laws">De Morgan&#8217;s law</a>.
This transforms expressions of the form <code>!l || !r</code> into <code>!(l &amp;&amp; r)</code>.
This also works with <code>&amp;&amp;</code>. This assist can only be applied with the cursor
on either <code>||</code> or <code>&amp;&amp;</code>.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="mi">4</span> <span class="p">||</span><span class="err">┃</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mf">3.14</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="o">!</span><span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="mi">4</span> <span class="o">&amp;&amp;</span> <span class="n">y</span> <span class="o">&gt;=</span> <span class="mf">3.14</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="auto_import" class="discrete"><code>auto_import</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/auto_import.rs#L66">auto_import.rs</a></p>
</div>
<div class="paragraph">
<p>If the name is unresolved, provides all possible imports for it.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">map</span> <span class="o">=</span> <span class="n">HashMap</span><span class="err">┃</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">collections</span><span class="p">::</span><span class="n">HashMap</span><span class="p">;</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">map</span> <span class="o">=</span> <span class="nn">HashMap</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="change_visibility" class="discrete"><code>change_visibility</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/change_visibility.rs#L12">change_visibility.rs</a></p>
</div>
<div class="paragraph">
<p>Adds or changes existing visibility specifier.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="err">┃</span><span class="k">fn</span> <span class="nf">frobnicate</span><span class="p">()</span> <span class="p">{}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">pub</span><span class="p">(</span><span class="n">crate</span><span class="p">)</span> <span class="k">fn</span> <span class="nf">frobnicate</span><span class="p">()</span> <span class="p">{}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="convert_bool_then_to_if" class="discrete"><code>convert_bool_then_to_if</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/convert_bool_then.rs#L134">convert_bool_then.rs</a></p>
</div>
<div class="paragraph">
<p>Converts a <code>bool::then</code> method call to an equivalent if expression.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span><span class="py">.then</span><span class="err">┃</span><span class="p">(||</span> <span class="n">val</span><span class="p">)</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="mi">0</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
        <span class="nf">Some</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nb">None</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="convert_for_loop_with_for_each" class="discrete"><code>convert_for_loop_with_for_each</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/convert_iter_for_each_to_for.rs#L73">convert_iter_for_each_to_for.rs</a></p>
</div>
<div class="paragraph">
<p>Converts a for loop into a for_each loop on the Iterator.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">x</span> <span class="o">=</span> <span class="nd">vec!</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>
    <span class="k">for</span><span class="err">┃</span> <span class="n">v</span> <span class="n">in</span> <span class="n">x</span> <span class="p">{</span>
        <span class="k">let</span> <span class="n">y</span> <span class="o">=</span> <span class="n">v</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">x</span> <span class="o">=</span> <span class="nd">vec!</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>
    <span class="n">x</span><span class="nf">.into_iter</span><span class="p">()</span><span class="nf">.for_each</span><span class="p">(|</span><span class="n">v</span><span class="p">|</span> <span class="p">{</span>
        <span class="k">let</span> <span class="n">y</span> <span class="o">=</span> <span class="n">v</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
    <span class="p">});</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="convert_if_to_bool_then" class="discrete"><code>convert_if_to_bool_then</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/convert_bool_then.rs#L21">convert_bool_then.rs</a></p>
</div>
<div class="paragraph">
<p>Converts an if expression into a corresponding <code>bool::then</code> call.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span><span class="err">┃</span> <span class="n">cond</span> <span class="p">{</span>
        <span class="nf">Some</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nb">None</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">cond</span><span class="nf">.then</span><span class="p">(||</span> <span class="n">val</span><span class="p">)</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="convert_integer_literal" class="discrete"><code>convert_integer_literal</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/convert_integer_literal.rs#L5">convert_integer_literal.rs</a></p>
</div>
<div class="paragraph">
<p>Converts the base of integer literals to other bases.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">const</span> <span class="mi">_</span><span class="p">:</span> <span class="nb">i32</span> <span class="o">=</span> <span class="mi">10</span><span class="err">┃</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">const</span> <span class="mi">_</span><span class="p">:</span> <span class="nb">i32</span> <span class="o">=</span> <span class="mi">0b1010</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="convert_into_to_from" class="discrete"><code>convert_into_to_from</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/convert_into_to_from.rs#L11">convert_into_to_from.rs</a></p>
</div>
<div class="paragraph">
<p>Converts an Into impl to an equivalent From impl.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">impl</span> <span class="err">┃</span><span class="n">Into</span><span class="o">&lt;</span><span class="n">Thing</span><span class="o">&gt;</span> <span class="k">for</span> <span class="nb">usize</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">into</span><span class="p">(</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Thing</span> <span class="p">{</span>
        <span class="n">Thing</span> <span class="p">{</span>
            <span class="n">b</span><span class="p">:</span> <span class="k">self</span><span class="nf">.to_string</span><span class="p">(),</span>
            <span class="n">a</span><span class="p">:</span> <span class="k">self</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">impl</span> <span class="n">From</span><span class="o">&lt;</span><span class="nb">usize</span><span class="o">&gt;</span> <span class="k">for</span> <span class="n">Thing</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">from</span><span class="p">(</span><span class="n">val</span><span class="p">:</span> <span class="nb">usize</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Self</span> <span class="p">{</span>
        <span class="n">Thing</span> <span class="p">{</span>
            <span class="n">b</span><span class="p">:</span> <span class="n">val</span><span class="nf">.to_string</span><span class="p">(),</span>
            <span class="n">a</span><span class="p">:</span> <span class="n">val</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="convert_iter_for_each_to_for" class="discrete"><code>convert_iter_for_each_to_for</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/convert_iter_for_each_to_for.rs#L11">convert_iter_for_each_to_for.rs</a></p>
</div>
<div class="paragraph">
<p>Converts an Iterator::for_each function into a for loop.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">iter</span> <span class="o">=</span> <span class="nn">iter</span><span class="p">::</span><span class="nf">repeat</span><span class="p">((</span><span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span>
    <span class="n">iter</span><span class="py">.for_each</span><span class="err">┃</span><span class="p">(|(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)|</span> <span class="p">{</span>
        <span class="nd">println!</span><span class="p">(</span><span class="s">"x: {}, y: {}"</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">iter</span> <span class="o">=</span> <span class="nn">iter</span><span class="p">::</span><span class="nf">repeat</span><span class="p">((</span><span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="n">in</span> <span class="n">iter</span> <span class="p">{</span>
        <span class="nd">println!</span><span class="p">(</span><span class="s">"x: {}, y: {}"</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="convert_to_guarded_return" class="discrete"><code>convert_to_guarded_return</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/convert_to_guarded_return.rs#L20">convert_to_guarded_return.rs</a></p>
</div>
<div class="paragraph">
<p>Replace a large conditional with a guarded return.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="err">┃</span><span class="k">if</span> <span class="n">cond</span> <span class="p">{</span>
        <span class="nf">foo</span><span class="p">();</span>
        <span class="nf">bar</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="o">!</span><span class="n">cond</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nf">foo</span><span class="p">();</span>
    <span class="nf">bar</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="convert_tuple_struct_to_named_struct" class="discrete"><code>convert_tuple_struct_to_named_struct</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/convert_tuple_struct_to_named_struct.rs#L10">convert_tuple_struct_to_named_struct.rs</a></p>
</div>
<div class="paragraph">
<p>Converts tuple struct to struct with named fields, and analogously for tuple enum variants.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Point</span><span class="err">┃</span><span class="p">(</span><span class="nb">f32</span><span class="p">,</span> <span class="nb">f32</span><span class="p">);</span>

<span class="k">impl</span> <span class="n">Point</span> <span class="p">{</span>
    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">new</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">f32</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">f32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Self</span> <span class="p">{</span>
        <span class="nf">Point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">x</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">f32</span> <span class="p">{</span>
        <span class="k">self</span><span class="err">.</span><span class="mi">0</span>
    <span class="p">}</span>

    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">y</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">f32</span> <span class="p">{</span>
        <span class="k">self</span><span class="err">.</span><span class="mi">1</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Point</span> <span class="p">{</span> <span class="n">field1</span><span class="p">:</span> <span class="nb">f32</span><span class="p">,</span> <span class="n">field2</span><span class="p">:</span> <span class="nb">f32</span> <span class="p">}</span>

<span class="k">impl</span> <span class="n">Point</span> <span class="p">{</span>
    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">new</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">f32</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">f32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Self</span> <span class="p">{</span>
        <span class="n">Point</span> <span class="p">{</span> <span class="n">field1</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="n">field2</span><span class="p">:</span> <span class="n">y</span> <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">x</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">f32</span> <span class="p">{</span>
        <span class="k">self</span><span class="py">.field1</span>
    <span class="p">}</span>

    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">y</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">f32</span> <span class="p">{</span>
        <span class="k">self</span><span class="py">.field2</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="convert_while_to_loop" class="discrete"><code>convert_while_to_loop</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/convert_while_to_loop.rs#L18">convert_while_to_loop.rs</a></p>
</div>
<div class="paragraph">
<p>Replace a while with a loop.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="err">┃</span><span class="k">while</span> <span class="n">cond</span> <span class="p">{</span>
        <span class="nf">foo</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">loop</span> <span class="p">{</span>
        <span class="k">if</span> <span class="o">!</span><span class="n">cond</span> <span class="p">{</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nf">foo</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="destructure_tuple_binding" class="discrete"><code>destructure_tuple_binding</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/destructure_tuple_binding.rs#L14">destructure_tuple_binding.rs</a></p>
</div>
<div class="paragraph">
<p>Destructures a tuple binding in place.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="err">┃</span><span class="n">t</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span>
    <span class="k">let</span> <span class="n">v</span> <span class="o">=</span> <span class="n">t</span><span class="err">.</span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="p">(</span><span class="err">┃</span><span class="mi">_0</span><span class="p">,</span> <span class="mi">_1</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span>
    <span class="k">let</span> <span class="n">v</span> <span class="o">=</span> <span class="mi">_0</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="expand_glob_import" class="discrete"><code>expand_glob_import</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/expand_glob_import.rs#L18">expand_glob_import.rs</a></p>
</div>
<div class="paragraph">
<p>Expands glob imports.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">mod</span> <span class="n">foo</span> <span class="p">{</span>
    <span class="k">pub</span> <span class="k">struct</span> <span class="n">Bar</span><span class="p">;</span>
    <span class="k">pub</span> <span class="k">struct</span> <span class="n">Baz</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">use</span> <span class="nn">foo</span><span class="p">::</span><span class="o">*</span><span class="err">┃</span><span class="p">;</span>

<span class="k">fn</span> <span class="nf">qux</span><span class="p">(</span><span class="n">bar</span><span class="p">:</span> <span class="n">Bar</span><span class="p">,</span> <span class="n">baz</span><span class="p">:</span> <span class="n">Baz</span><span class="p">)</span> <span class="p">{}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">mod</span> <span class="n">foo</span> <span class="p">{</span>
    <span class="k">pub</span> <span class="k">struct</span> <span class="n">Bar</span><span class="p">;</span>
    <span class="k">pub</span> <span class="k">struct</span> <span class="n">Baz</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">use</span> <span class="nn">foo</span><span class="p">::{</span><span class="n">Baz</span><span class="p">,</span> <span class="n">Bar</span><span class="p">};</span>

<span class="k">fn</span> <span class="nf">qux</span><span class="p">(</span><span class="n">bar</span><span class="p">:</span> <span class="n">Bar</span><span class="p">,</span> <span class="n">baz</span><span class="p">:</span> <span class="n">Baz</span><span class="p">)</span> <span class="p">{}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="extract_function" class="discrete"><code>extract_function</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/extract_function.rs#L35">extract_function.rs</a></p>
</div>
<div class="paragraph">
<p>Extracts selected statements into new function.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="err">┃</span><span class="k">let</span> <span class="n">m</span> <span class="o">=</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
    <span class="k">let</span> <span class="n">k</span> <span class="o">=</span> <span class="n">m</span> <span class="o">+</span> <span class="n">n</span><span class="p">;</span><span class="err">┃</span>
    <span class="k">let</span> <span class="n">g</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="nf">fun_name</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
    <span class="k">let</span> <span class="n">g</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="err">┃</span><span class="nf">fun_name</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">i32</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">m</span> <span class="o">=</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
    <span class="k">let</span> <span class="n">k</span> <span class="o">=</span> <span class="n">m</span> <span class="o">+</span> <span class="n">n</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="extract_module" class="discrete"><code>extract_module</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/extract_module.rs#L25">extract_module.rs</a></p>
</div>
<div class="paragraph">
<p>Extracts a selected region as seperate module. All the references, visibility and imports are
resolved.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="err">┃</span><span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">i32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">i32</span> <span class="p">{</span>
    <span class="n">name</span> <span class="o">+</span> <span class="mi">1</span>
<span class="p">}</span><span class="err">┃</span>

<span class="k">fn</span> <span class="nf">bar</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">i32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">i32</span> <span class="p">{</span>
    <span class="n">name</span> <span class="o">+</span> <span class="mi">2</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="k">mod</span> <span class="n">modname</span> <span class="p">{</span>
    <span class="k">pub</span><span class="p">(</span><span class="n">crate</span><span class="p">)</span> <span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">i32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">i32</span> <span class="p">{</span>
        <span class="n">name</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">bar</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">i32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">i32</span> <span class="p">{</span>
    <span class="n">name</span> <span class="o">+</span> <span class="mi">2</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="extract_struct_from_enum_variant" class="discrete"><code>extract_struct_from_enum_variant</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/extract_struct_from_enum_variant.rs#L29">extract_struct_from_enum_variant.rs</a></p>
</div>
<div class="paragraph">
<p>Extracts a struct from enum variant.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">A</span> <span class="p">{</span> <span class="err">┃</span><span class="nf">One</span><span class="p">(</span><span class="nb">u32</span><span class="p">,</span> <span class="nb">u32</span><span class="p">)</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="nf">One</span><span class="p">(</span><span class="nb">u32</span><span class="p">,</span> <span class="nb">u32</span><span class="p">);</span>

<span class="k">enum</span> <span class="n">A</span> <span class="p">{</span> <span class="nf">One</span><span class="p">(</span><span class="n">One</span><span class="p">)</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="extract_type_alias" class="discrete"><code>extract_type_alias</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/extract_type_alias.rs#L11">extract_type_alias.rs</a></p>
</div>
<div class="paragraph">
<p>Extracts the selected type as a type alias.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">S</span> <span class="p">{</span>
    <span class="n">field</span><span class="p">:</span> <span class="err">┃</span><span class="p">(</span><span class="nb">u8</span><span class="p">,</span> <span class="nb">u8</span><span class="p">,</span> <span class="nb">u8</span><span class="p">)</span><span class="err">┃</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">type</span> <span class="err">┃</span><span class="n">Type</span> <span class="o">=</span> <span class="p">(</span><span class="nb">u8</span><span class="p">,</span> <span class="nb">u8</span><span class="p">,</span> <span class="nb">u8</span><span class="p">);</span>

<span class="k">struct</span> <span class="n">S</span> <span class="p">{</span>
    <span class="n">field</span><span class="p">:</span> <span class="n">Type</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="extract_variable" class="discrete"><code>extract_variable</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/extract_variable.rs#L14">extract_variable.rs</a></p>
</div>
<div class="paragraph">
<p>Extracts subexpression into a variable.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="err">┃</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span><span class="err">┃</span> <span class="o">*</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="err">┃</span><span class="n">var_name</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span><span class="p">);</span>
    <span class="n">var_name</span> <span class="o">*</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="fix_visibility" class="discrete"><code>fix_visibility</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/fix_visibility.rs#L12">fix_visibility.rs</a></p>
</div>
<div class="paragraph">
<p>Makes inaccessible item public.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="k">mod</span> <span class="n">m</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">frobnicate</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>
<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nn">m</span><span class="p">::</span><span class="n">frobnicate</span><span class="err">┃</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="k">mod</span> <span class="n">m</span> <span class="p">{</span>
    <span class="err">┃</span><span class="k">pub</span><span class="p">(</span><span class="n">crate</span><span class="p">)</span> <span class="k">fn</span> <span class="nf">frobnicate</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>
<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nn">m</span><span class="p">::</span><span class="nf">frobnicate</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="flip_binexpr" class="discrete"><code>flip_binexpr</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/flip_binexpr.rs#L5">flip_binexpr.rs</a></p>
</div>
<div class="paragraph">
<p>Flips operands of a binary expression.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="mi">_</span> <span class="o">=</span> <span class="mi">90</span> <span class="o">+</span><span class="err">┃</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="mi">_</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">90</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="flip_comma" class="discrete"><code>flip_comma</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/flip_comma.rs#L5">flip_comma.rs</a></p>
</div>
<div class="paragraph">
<p>Flips two comma-separated items.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span><span class="err">┃</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">));</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="flip_trait_bound" class="discrete"><code>flip_trait_bound</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/flip_trait_bound.rs#L9">flip_trait_bound.rs</a></p>
</div>
<div class="paragraph">
<p>Flips two trait bounds.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="n">foo</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="n">Clone</span> <span class="o">+</span><span class="err">┃</span> <span class="nb">Copy</span><span class="o">&gt;</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="n">foo</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="nb">Copy</span> <span class="o">+</span> <span class="n">Clone</span><span class="o">&gt;</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_constant" class="discrete"><code>generate_constant</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/generate_constant.rs#L12">generate_constant.rs</a></p>
</div>
<div class="paragraph">
<p>Generate a named constant.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">S</span> <span class="p">{</span> <span class="n">i</span><span class="p">:</span> <span class="nb">usize</span> <span class="p">}</span>
<span class="k">impl</span> <span class="n">S</span> <span class="p">{</span> <span class="k">pub</span> <span class="k">fn</span> <span class="nf">new</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">usize</span><span class="p">)</span> <span class="p">{}</span> <span class="p">}</span>
<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">v</span> <span class="o">=</span> <span class="nn">S</span><span class="p">::</span><span class="nf">new</span><span class="p">(</span><span class="n">CAPA</span><span class="err">┃</span><span class="n">CITY</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">S</span> <span class="p">{</span> <span class="n">i</span><span class="p">:</span> <span class="nb">usize</span> <span class="p">}</span>
<span class="k">impl</span> <span class="n">S</span> <span class="p">{</span> <span class="k">pub</span> <span class="k">fn</span> <span class="nf">new</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">usize</span><span class="p">)</span> <span class="p">{}</span> <span class="p">}</span>
<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">const</span> <span class="n">CAPACITY</span><span class="p">:</span> <span class="nb">usize</span> <span class="o">=</span> <span class="err">┃</span><span class="p">;</span>
    <span class="k">let</span> <span class="n">v</span> <span class="o">=</span> <span class="nn">S</span><span class="p">::</span><span class="nf">new</span><span class="p">(</span><span class="n">CAPACITY</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_default_from_enum_variant" class="discrete"><code>generate_default_from_enum_variant</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/generate_default_from_enum_variant.rs#L6">generate_default_from_enum_variant.rs</a></p>
</div>
<div class="paragraph">
<p>Adds a Default impl for an enum using a variant.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Version</span> <span class="p">{</span>
 <span class="n">Undefined</span><span class="p">,</span>
 <span class="n">Minor</span><span class="err">┃</span><span class="p">,</span>
 <span class="n">Major</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Version</span> <span class="p">{</span>
 <span class="n">Undefined</span><span class="p">,</span>
 <span class="n">Minor</span><span class="p">,</span>
 <span class="n">Major</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="n">Default</span> <span class="k">for</span> <span class="n">Version</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">default</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">Self</span> <span class="p">{</span>
        <span class="nn">Self</span><span class="p">::</span><span class="n">Minor</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_default_from_new" class="discrete"><code>generate_default_from_new</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/generate_default_from_new.rs#L14">generate_default_from_new.rs</a></p>
</div>
<div class="paragraph">
<p>Generates default implementation from new method.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Example</span> <span class="p">{</span> <span class="mi">_</span><span class="n">inner</span><span class="p">:</span> <span class="p">()</span> <span class="p">}</span>

<span class="k">impl</span> <span class="n">Example</span> <span class="p">{</span>
    <span class="k">pub</span> <span class="k">fn</span> <span class="n">n</span><span class="err">┃</span><span class="nf">ew</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">Self</span> <span class="p">{</span>
        <span class="n">Self</span> <span class="p">{</span> <span class="mi">_</span><span class="n">inner</span><span class="p">:</span> <span class="p">()</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Example</span> <span class="p">{</span> <span class="mi">_</span><span class="n">inner</span><span class="p">:</span> <span class="p">()</span> <span class="p">}</span>

<span class="k">impl</span> <span class="n">Example</span> <span class="p">{</span>
    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">new</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">Self</span> <span class="p">{</span>
        <span class="n">Self</span> <span class="p">{</span> <span class="mi">_</span><span class="n">inner</span><span class="p">:</span> <span class="p">()</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="n">Default</span> <span class="k">for</span> <span class="n">Example</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">default</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">Self</span> <span class="p">{</span>
        <span class="nn">Self</span><span class="p">::</span><span class="nf">new</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_delegate_methods" class="discrete"><code>generate_delegate_methods</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/generate_delegate_methods.rs#L10">generate_delegate_methods.rs</a></p>
</div>
<div class="paragraph">
<p>Generate delegate methods.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="nf">Age</span><span class="p">(</span><span class="nb">u8</span><span class="p">);</span>
<span class="k">impl</span> <span class="n">Age</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">age</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">u8</span> <span class="p">{</span>
        <span class="k">self</span><span class="err">.</span><span class="mi">0</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">struct</span> <span class="n">Person</span> <span class="p">{</span>
    <span class="n">ag</span><span class="err">┃</span><span class="n">e</span><span class="p">:</span> <span class="n">Age</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="nf">Age</span><span class="p">(</span><span class="nb">u8</span><span class="p">);</span>
<span class="k">impl</span> <span class="n">Age</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">age</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">u8</span> <span class="p">{</span>
        <span class="k">self</span><span class="err">.</span><span class="mi">0</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">struct</span> <span class="n">Person</span> <span class="p">{</span>
    <span class="n">age</span><span class="p">:</span> <span class="n">Age</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="n">Person</span> <span class="p">{</span>
    <span class="err">┃</span><span class="k">fn</span> <span class="nf">age</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">u8</span> <span class="p">{</span>
        <span class="k">self</span><span class="py">.age</span><span class="nf">.age</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_deref" class="discrete"><code>generate_deref</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/generate_deref.rs#L15">generate_deref.rs</a></p>
</div>
<div class="paragraph">
<p>Generate <code>Deref</code> impl using the given struct field.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">A</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">B</span> <span class="p">{</span>
   <span class="err">┃</span><span class="n">a</span><span class="p">:</span> <span class="n">A</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">A</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">B</span> <span class="p">{</span>
   <span class="n">a</span><span class="p">:</span> <span class="n">A</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="nn">std</span><span class="p">::</span><span class="nn">ops</span><span class="p">::</span><span class="n">Deref</span> <span class="k">for</span> <span class="n">B</span> <span class="p">{</span>
    <span class="k">type</span> <span class="n">Target</span> <span class="o">=</span> <span class="n">A</span><span class="p">;</span>

    <span class="k">fn</span> <span class="nf">deref</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="o">&amp;</span><span class="nn">Self</span><span class="p">::</span><span class="n">Target</span> <span class="p">{</span>
        <span class="o">&amp;</span><span class="k">self</span><span class="py">.a</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_derive" class="discrete"><code>generate_derive</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/generate_derive.rs#L9">generate_derive.rs</a></p>
</div>
<div class="paragraph">
<p>Adds a new <code>#[derive()]</code> clause to a struct or enum.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Point</span> <span class="p">{</span>
    <span class="n">x</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span>
    <span class="n">y</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span><span class="err">┃</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="nd">#[derive(</span><span class="err">┃</span><span class="nd">)]</span>
<span class="k">struct</span> <span class="n">Point</span> <span class="p">{</span>
    <span class="n">x</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span>
    <span class="n">y</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_enum_as_method" class="discrete"><code>generate_enum_as_method</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/generate_enum_projection_method.rs#L55">generate_enum_projection_method.rs</a></p>
</div>
<div class="paragraph">
<p>Generate an <code>as_</code> method for an enum variant.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Value</span> <span class="p">{</span>
 <span class="nf">Number</span><span class="p">(</span><span class="nb">i32</span><span class="p">),</span>
 <span class="nf">Text</span><span class="p">(</span><span class="nb">String</span><span class="p">)</span><span class="err">┃</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Value</span> <span class="p">{</span>
 <span class="nf">Number</span><span class="p">(</span><span class="nb">i32</span><span class="p">),</span>
 <span class="nf">Text</span><span class="p">(</span><span class="nb">String</span><span class="p">),</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="n">Value</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">as_text</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">Option</span><span class="o">&lt;&amp;</span><span class="nb">String</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="k">let</span> <span class="nn">Self</span><span class="p">::</span><span class="nf">Text</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">=</span> <span class="k">self</span> <span class="p">{</span>
            <span class="nf">Some</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nb">None</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_enum_is_method" class="discrete"><code>generate_enum_is_method</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/generate_enum_is_method.rs#L10">generate_enum_is_method.rs</a></p>
</div>
<div class="paragraph">
<p>Generate an <code>is_</code> method for an enum variant.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Version</span> <span class="p">{</span>
 <span class="n">Undefined</span><span class="p">,</span>
 <span class="n">Minor</span><span class="err">┃</span><span class="p">,</span>
 <span class="n">Major</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Version</span> <span class="p">{</span>
 <span class="n">Undefined</span><span class="p">,</span>
 <span class="n">Minor</span><span class="p">,</span>
 <span class="n">Major</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="n">Version</span> <span class="p">{</span>
    <span class="c">/// Returns `true` if the version is [`Minor`].</span>
    <span class="c">///</span>
    <span class="c">/// [`Minor`]: Version::Minor</span>
    <span class="k">fn</span> <span class="nf">is_minor</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">bool</span> <span class="p">{</span>
        <span class="nd">matches!</span><span class="p">(</span><span class="k">self</span><span class="p">,</span> <span class="nn">Self</span><span class="p">::</span><span class="n">Minor</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_enum_try_into_method" class="discrete"><code>generate_enum_try_into_method</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/generate_enum_projection_method.rs#L11">generate_enum_projection_method.rs</a></p>
</div>
<div class="paragraph">
<p>Generate an <code>try_into_</code> method for an enum variant.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Value</span> <span class="p">{</span>
 <span class="nf">Number</span><span class="p">(</span><span class="nb">i32</span><span class="p">),</span>
 <span class="nf">Text</span><span class="p">(</span><span class="nb">String</span><span class="p">)</span><span class="err">┃</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Value</span> <span class="p">{</span>
 <span class="nf">Number</span><span class="p">(</span><span class="nb">i32</span><span class="p">),</span>
 <span class="nf">Text</span><span class="p">(</span><span class="nb">String</span><span class="p">),</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="n">Value</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">try_into_text</span><span class="p">(</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Result</span><span class="o">&lt;</span><span class="nb">String</span><span class="p">,</span> <span class="n">Self</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="k">let</span> <span class="nn">Self</span><span class="p">::</span><span class="nf">Text</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">=</span> <span class="k">self</span> <span class="p">{</span>
            <span class="nf">Ok</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nf">Err</span><span class="p">(</span><span class="k">self</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_from_impl_for_enum" class="discrete"><code>generate_from_impl_for_enum</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/generate_from_impl_for_enum.rs#L7">generate_from_impl_for_enum.rs</a></p>
</div>
<div class="paragraph">
<p>Adds a From impl for an enum variant with one tuple field.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">A</span> <span class="p">{</span> <span class="err">┃</span><span class="nf">One</span><span class="p">(</span><span class="nb">u32</span><span class="p">)</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">A</span> <span class="p">{</span> <span class="nf">One</span><span class="p">(</span><span class="nb">u32</span><span class="p">)</span> <span class="p">}</span>

<span class="k">impl</span> <span class="n">From</span><span class="o">&lt;</span><span class="nb">u32</span><span class="o">&gt;</span> <span class="k">for</span> <span class="n">A</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">from</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">u32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Self</span> <span class="p">{</span>
        <span class="nn">Self</span><span class="p">::</span><span class="nf">One</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_function" class="discrete"><code>generate_function</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/generate_function.rs#L27">generate_function.rs</a></p>
</div>
<div class="paragraph">
<p>Adds a stub function with a signature matching the function under the cursor.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Baz</span><span class="p">;</span>
<span class="k">fn</span> <span class="nf">baz</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">Baz</span> <span class="p">{</span> <span class="n">Baz</span> <span class="p">}</span>
<span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">bar</span><span class="err">┃</span><span class="p">(</span><span class="s">""</span><span class="p">,</span> <span class="nf">baz</span><span class="p">());</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Baz</span><span class="p">;</span>
<span class="k">fn</span> <span class="nf">baz</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">Baz</span> <span class="p">{</span> <span class="n">Baz</span> <span class="p">}</span>
<span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">bar</span><span class="p">(</span><span class="s">""</span><span class="p">,</span> <span class="nf">baz</span><span class="p">());</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">bar</span><span class="p">(</span><span class="n">arg</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">str</span><span class="p">,</span> <span class="n">baz</span><span class="p">:</span> <span class="n">Baz</span><span class="p">)</span> <span class="err">$</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span><span class="k">-&gt;</span> <span class="mi">_</span><span class="p">}</span> <span class="p">{</span>
    <span class="nd">todo!</span><span class="p">()</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_getter" class="discrete"><code>generate_getter</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/generate_getter.rs#L10">generate_getter.rs</a></p>
</div>
<div class="paragraph">
<p>Generate a getter method.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Person</span> <span class="p">{</span>
    <span class="n">nam</span><span class="err">┃</span><span class="n">e</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Person</span> <span class="p">{</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="n">Person</span> <span class="p">{</span>
    <span class="c">/// Get a reference to the person's name.</span>
    <span class="k">fn</span> <span class="err">┃</span><span class="nf">name</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="o">&amp;</span><span class="nb">str</span> <span class="p">{</span>
        <span class="k">self</span><span class="py">.name</span><span class="nf">.as_ref</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_getter_mut" class="discrete"><code>generate_getter_mut</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/generate_getter.rs#L51">generate_getter.rs</a></p>
</div>
<div class="paragraph">
<p>Generate a mut getter method.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Person</span> <span class="p">{</span>
    <span class="n">nam</span><span class="err">┃</span><span class="n">e</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Person</span> <span class="p">{</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="n">Person</span> <span class="p">{</span>
    <span class="c">/// Get a mutable reference to the person's name.</span>
    <span class="k">fn</span> <span class="err">┃</span><span class="nf">name_mut</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="o">&amp;</span><span class="k">mut</span> <span class="nb">String</span> <span class="p">{</span>
        <span class="o">&amp;</span><span class="k">mut</span> <span class="k">self</span><span class="py">.name</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_impl" class="discrete"><code>generate_impl</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/generate_impl.rs#L5">generate_impl.rs</a></p>
</div>
<div class="paragraph">
<p>Adds a new inherent impl for a type.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Ctx</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="n">Clone</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span><span class="err">┃</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Ctx</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="n">Clone</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">impl</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="n">Clone</span><span class="o">&gt;</span> <span class="n">Ctx</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="err">┃</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_is_empty_from_len" class="discrete"><code>generate_is_empty_from_len</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/generate_is_empty_from_len.rs#L12">generate_is_empty_from_len.rs</a></p>
</div>
<div class="paragraph">
<p>Generates is_empty implementation from the len method.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">MyStruct</span> <span class="p">{</span> <span class="n">data</span><span class="p">:</span> <span class="nb">Vec</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span> <span class="p">}</span>

<span class="k">impl</span> <span class="n">MyStruct</span> <span class="p">{</span>
    <span class="n">p</span><span class="err">┃</span><span class="n">ub</span> <span class="k">fn</span> <span class="nf">len</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">usize</span> <span class="p">{</span>
        <span class="k">self</span><span class="py">.data</span><span class="nf">.len</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">MyStruct</span> <span class="p">{</span> <span class="n">data</span><span class="p">:</span> <span class="nb">Vec</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span> <span class="p">}</span>

<span class="k">impl</span> <span class="n">MyStruct</span> <span class="p">{</span>
    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">len</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">usize</span> <span class="p">{</span>
        <span class="k">self</span><span class="py">.data</span><span class="nf">.len</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="k">pub</span> <span class="k">fn</span> <span class="nf">is_empty</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">bool</span> <span class="p">{</span>
        <span class="k">self</span><span class="nf">.len</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_new" class="discrete"><code>generate_new</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/generate_new.rs#L10">generate_new.rs</a></p>
</div>
<div class="paragraph">
<p>Adds a new inherent impl for a type.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Ctx</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="n">Clone</span><span class="o">&gt;</span> <span class="p">{</span>
     <span class="n">data</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span><span class="err">┃</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Ctx</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="n">Clone</span><span class="o">&gt;</span> <span class="p">{</span>
     <span class="n">data</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">impl</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="n">Clone</span><span class="o">&gt;</span> <span class="n">Ctx</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="err">┃</span><span class="nf">new</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Self</span> <span class="p">{</span> <span class="n">Self</span> <span class="p">{</span> <span class="n">data</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_setter" class="discrete"><code>generate_setter</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/generate_setter.rs#L9">generate_setter.rs</a></p>
</div>
<div class="paragraph">
<p>Generate a setter method.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Person</span> <span class="p">{</span>
    <span class="n">nam</span><span class="err">┃</span><span class="n">e</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Person</span> <span class="p">{</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="n">Person</span> <span class="p">{</span>
    <span class="c">/// Set the person's name.</span>
    <span class="k">fn</span> <span class="nf">set_name</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="k">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">String</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="py">.name</span> <span class="o">=</span> <span class="n">name</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="inline_call" class="discrete"><code>inline_call</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/inline_call.rs#L155">inline_call.rs</a></p>
</div>
<div class="paragraph">
<p>Inlines a function or method body creating a <code>let</code> statement per parameter unless the parameter
can be inlined. The parameter will be inlined either if it the supplied argument is a simple local
or if the parameter is only accessed inside the function body once.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">Option</span><span class="o">&lt;&amp;</span><span class="nb">str</span><span class="o">&gt;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="py">.unwrap</span><span class="err">┃</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">Option</span><span class="o">&lt;&amp;</span><span class="nb">str</span><span class="o">&gt;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">name</span> <span class="o">=</span> <span class="k">match</span> <span class="n">name</span> <span class="p">{</span>
            <span class="nf">Some</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="n">val</span><span class="p">,</span>
            <span class="nb">None</span> <span class="k">=&gt;</span> <span class="nd">panic!</span><span class="p">(</span><span class="s">"called `Option::unwrap()` on a `None` value"</span><span class="p">),</span>
        <span class="p">};</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="inline_into_callers" class="discrete"><code>inline_into_callers</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/inline_call.rs#L23">inline_call.rs</a></p>
</div>
<div class="paragraph">
<p>Inline a function or method body into all of its callers where possible, creating a <code>let</code> statement per parameter
unless the parameter can be inlined. The parameter will be inlined either if it the supplied argument is a simple local
or if the parameter is only accessed inside the function body once.
If all calls can be inlined the function will be removed.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">print</span><span class="p">(</span><span class="mi">_</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">str</span><span class="p">)</span> <span class="p">{}</span>
<span class="k">fn</span> <span class="n">foo</span><span class="err">┃</span><span class="p">(</span><span class="n">word</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">str</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="o">!</span><span class="n">word</span><span class="nf">.is_empty</span><span class="p">()</span> <span class="p">{</span>
        <span class="nf">print</span><span class="p">(</span><span class="n">word</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="k">fn</span> <span class="nf">bar</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">foo</span><span class="p">(</span><span class="s">"안녕하세요"</span><span class="p">);</span>
    <span class="nf">foo</span><span class="p">(</span><span class="s">"여러분"</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">print</span><span class="p">(</span><span class="mi">_</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">str</span><span class="p">)</span> <span class="p">{}</span>

<span class="k">fn</span> <span class="nf">bar</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">{</span>
        <span class="k">let</span> <span class="n">word</span> <span class="o">=</span> <span class="s">"안녕하세요"</span><span class="p">;</span>
        <span class="k">if</span> <span class="o">!</span><span class="n">word</span><span class="nf">.is_empty</span><span class="p">()</span> <span class="p">{</span>
            <span class="nf">print</span><span class="p">(</span><span class="n">word</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">};</span>
    <span class="p">{</span>
        <span class="k">let</span> <span class="n">word</span> <span class="o">=</span> <span class="s">"여러분"</span><span class="p">;</span>
        <span class="k">if</span> <span class="o">!</span><span class="n">word</span><span class="nf">.is_empty</span><span class="p">()</span> <span class="p">{</span>
            <span class="nf">print</span><span class="p">(</span><span class="n">word</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="inline_local_variable" class="discrete"><code>inline_local_variable</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/inline_local_variable.rs#L19">inline_local_variable.rs</a></p>
</div>
<div class="paragraph">
<p>Inlines a local variable.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">x</span><span class="err">┃</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
    <span class="n">x</span> <span class="o">*</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="introduce_named_generic" class="discrete"><code>introduce_named_generic</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/introduce_named_generic.rs#L8">introduce_named_generic.rs</a></p>
</div>
<div class="paragraph">
<p>Replaces <code>impl Trait</code> function argument with the named generic.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="n">bar</span><span class="p">:</span> <span class="err">┃</span><span class="k">impl</span> <span class="n">Bar</span><span class="p">)</span> <span class="p">{}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="n">foo</span><span class="o">&lt;</span><span class="n">B</span><span class="p">:</span> <span class="n">Bar</span><span class="o">&gt;</span><span class="p">(</span><span class="n">bar</span><span class="p">:</span> <span class="n">B</span><span class="p">)</span> <span class="p">{}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="introduce_named_lifetime" class="discrete"><code>introduce_named_lifetime</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/introduce_named_lifetime.rs#L13">introduce_named_lifetime.rs</a></p>
</div>
<div class="paragraph">
<p>Change an anonymous lifetime to a named lifetime.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">impl</span> <span class="n">Cursor</span><span class="o">&lt;</span><span class="nv">'_</span><span class="err">┃</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">node</span><span class="p">(</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="o">&amp;</span><span class="n">SyntaxNode</span> <span class="p">{</span>
        <span class="k">match</span> <span class="k">self</span> <span class="p">{</span>
            <span class="nn">Cursor</span><span class="p">::</span><span class="nf">Replace</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="p">|</span> <span class="nn">Cursor</span><span class="p">::</span><span class="nf">Before</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="n">node</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">impl</span><span class="o">&lt;</span><span class="nv">'a</span><span class="o">&gt;</span> <span class="n">Cursor</span><span class="o">&lt;</span><span class="nv">'a</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">node</span><span class="p">(</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="o">&amp;</span><span class="n">SyntaxNode</span> <span class="p">{</span>
        <span class="k">match</span> <span class="k">self</span> <span class="p">{</span>
            <span class="nn">Cursor</span><span class="p">::</span><span class="nf">Replace</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="p">|</span> <span class="nn">Cursor</span><span class="p">::</span><span class="nf">Before</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="n">node</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="invert_if" class="discrete"><code>invert_if</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/invert_if.rs#L12">invert_if.rs</a></p>
</div>
<div class="paragraph">
<p>This transforms if expressions of the form <code>if !x {A} else {B}</code> into <code>if x {B} else {A}</code>
This also works with <code>!=</code>. This assist can only be applied with the cursor on <code>if</code>.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span><span class="err">┃</span> <span class="o">!</span><span class="n">y</span> <span class="p">{</span> <span class="n">A</span> <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="n">B</span> <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">y</span> <span class="p">{</span> <span class="n">B</span> <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="n">A</span> <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="line_to_block" class="discrete"><code>line_to_block</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/convert_comment_block.rs#L9">convert_comment_block.rs</a></p>
</div>
<div class="paragraph">
<p>Converts comments between block and single-line form.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre>   <span class="c">// Multi-line┃</span>
   <span class="c">// comment</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre>  <span class="cm">/*
  Multi-line
  comment
  */</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="make_raw_string" class="discrete"><code>make_raw_string</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/raw_string.rs#L7">raw_string.rs</a></p>
</div>
<div class="paragraph">
<p>Adds <code>r#</code> to a plain string literal.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="s">"Hello,┃ World!"</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="s">r#"Hello, World!"#</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="make_usual_string" class="discrete"><code>make_usual_string</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/raw_string.rs#L49">raw_string.rs</a></p>
</div>
<div class="paragraph">
<p>Turns a raw string into a plain string.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="s">r#"Hello,┃ "World!""#</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="s">"Hello, </span><span class="se">\"</span><span class="s">World!</span><span class="se">\"</span><span class="s">"</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="merge_imports" class="discrete"><code>merge_imports</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/merge_imports.rs#L10">merge_imports.rs</a></p>
</div>
<div class="paragraph">
<p>Merges two imports with a common prefix.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="err">┃</span><span class="nn">fmt</span><span class="p">::</span><span class="n">Formatter</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="n">io</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::{</span><span class="nn">fmt</span><span class="p">::</span><span class="n">Formatter</span><span class="p">,</span> <span class="n">io</span><span class="p">};</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="merge_match_arms" class="discrete"><code>merge_match_arms</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/merge_match_arms.rs#L11">merge_match_arms.rs</a></p>
</div>
<div class="paragraph">
<p>Merges the current match arm with the following if their bodies are identical.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">match</span> <span class="n">action</span> <span class="p">{</span>
        <span class="err">┃</span><span class="nn">Action</span><span class="p">::</span><span class="nf">Move</span><span class="p">(</span><span class="o">..</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="nf">foo</span><span class="p">(),</span>
        <span class="nn">Action</span><span class="p">::</span><span class="n">Stop</span> <span class="k">=&gt;</span> <span class="nf">foo</span><span class="p">(),</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">match</span> <span class="n">action</span> <span class="p">{</span>
        <span class="nn">Action</span><span class="p">::</span><span class="nf">Move</span><span class="p">(</span><span class="o">..</span><span class="p">)</span> <span class="p">|</span> <span class="nn">Action</span><span class="p">::</span><span class="n">Stop</span> <span class="k">=&gt;</span> <span class="nf">foo</span><span class="p">(),</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="move_arm_cond_to_match_guard" class="discrete"><code>move_arm_cond_to_match_guard</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/move_guard.rs#L76">move_guard.rs</a></p>
</div>
<div class="paragraph">
<p>Moves if expression from match arm body into a guard.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">match</span> <span class="n">action</span> <span class="p">{</span>
        <span class="nn">Action</span><span class="p">::</span><span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span> <span class="p">}</span> <span class="k">=&gt;</span> <span class="err">┃</span><span class="k">if</span> <span class="n">distance</span> <span class="o">&gt;</span> <span class="mi">10</span> <span class="p">{</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">},</span>
        <span class="mi">_</span> <span class="k">=&gt;</span> <span class="p">(),</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">match</span> <span class="n">action</span> <span class="p">{</span>
        <span class="nn">Action</span><span class="p">::</span><span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span> <span class="p">}</span> <span class="k">if</span> <span class="n">distance</span> <span class="o">&gt;</span> <span class="mi">10</span> <span class="k">=&gt;</span> <span class="nf">foo</span><span class="p">(),</span>
        <span class="mi">_</span> <span class="k">=&gt;</span> <span class="p">(),</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="move_bounds_to_where_clause" class="discrete"><code>move_bounds_to_where_clause</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/move_bounds.rs#L8">move_bounds.rs</a></p>
</div>
<div class="paragraph">
<p>Moves inline type bounds to a where clause.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="n">apply</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="n">U</span><span class="p">,</span> <span class="err">┃</span><span class="n">F</span><span class="p">:</span> <span class="nf">FnOnce</span><span class="p">(</span><span class="n">T</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">U</span><span class="o">&gt;</span><span class="p">(</span><span class="n">f</span><span class="p">:</span> <span class="n">F</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">U</span> <span class="p">{</span>
    <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="n">apply</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="n">U</span><span class="p">,</span> <span class="n">F</span><span class="o">&gt;</span><span class="p">(</span><span class="n">f</span><span class="p">:</span> <span class="n">F</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">U</span> <span class="k">where</span> <span class="n">F</span><span class="p">:</span> <span class="nf">FnOnce</span><span class="p">(</span><span class="n">T</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">U</span> <span class="p">{</span>
    <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="move_from_mod_rs" class="discrete"><code>move_from_mod_rs</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/move_from_mod_rs.rs#L12">move_from_mod_rs.rs</a></p>
</div>
<div class="paragraph">
<p>Moves xxx/mod.rs to xxx.rs.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="c">//- /main.rs</span>
<span class="k">mod</span> <span class="n">a</span><span class="p">;</span>
<span class="c">//- /a/mod.rs</span>
<span class="err">┃</span><span class="k">fn</span> <span class="nf">t</span><span class="p">()</span> <span class="p">{}</span><span class="err">┃</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">t</span><span class="p">()</span> <span class="p">{}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="move_guard_to_arm_body" class="discrete"><code>move_guard_to_arm_body</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/move_guard.rs#L8">move_guard.rs</a></p>
</div>
<div class="paragraph">
<p>Moves match guard into match arm body.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">match</span> <span class="n">action</span> <span class="p">{</span>
        <span class="nn">Action</span><span class="p">::</span><span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span> <span class="p">}</span> <span class="err">┃</span><span class="k">if</span> <span class="n">distance</span> <span class="o">&gt;</span> <span class="mi">10</span> <span class="k">=&gt;</span> <span class="nf">foo</span><span class="p">(),</span>
        <span class="mi">_</span> <span class="k">=&gt;</span> <span class="p">(),</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">match</span> <span class="n">action</span> <span class="p">{</span>
        <span class="nn">Action</span><span class="p">::</span><span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span> <span class="p">}</span> <span class="k">=&gt;</span> <span class="k">if</span> <span class="n">distance</span> <span class="o">&gt;</span> <span class="mi">10</span> <span class="p">{</span>
            <span class="nf">foo</span><span class="p">()</span>
        <span class="p">},</span>
        <span class="mi">_</span> <span class="k">=&gt;</span> <span class="p">(),</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="move_module_to_file" class="discrete"><code>move_module_to_file</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/move_module_to_file.rs#L14">move_module_to_file.rs</a></p>
</div>
<div class="paragraph">
<p>Moves inline module&#8217;s contents to a separate file.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">mod</span> <span class="err">┃</span><span class="n">foo</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">t</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">mod</span> <span class="n">foo</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="move_to_mod_rs" class="discrete"><code>move_to_mod_rs</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/move_to_mod_rs.rs#L12">move_to_mod_rs.rs</a></p>
</div>
<div class="paragraph">
<p>Moves xxx.rs to xxx/mod.rs.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="c">//- /main.rs</span>
<span class="k">mod</span> <span class="n">a</span><span class="p">;</span>
<span class="c">//- /a.rs</span>
<span class="err">┃</span><span class="k">fn</span> <span class="nf">t</span><span class="p">()</span> <span class="p">{}</span><span class="err">┃</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">t</span><span class="p">()</span> <span class="p">{}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="promote_local_to_const" class="discrete"><code>promote_local_to_const</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/promote_local_to_const.rs#L19">promote_local_to_const.rs</a></p>
</div>
<div class="paragraph">
<p>Promotes a local variable to a const item changing its name to a <code>SCREAMING_SNAKE_CASE</code> variant
if the local uses no non-const expressions.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">foo</span><span class="err">┃</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>

    <span class="k">if</span> <span class="n">foo</span> <span class="p">{</span>
        <span class="nd">println!</span><span class="p">(</span><span class="s">"It's true"</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nd">println!</span><span class="p">(</span><span class="s">"It's false"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">const</span> <span class="err">┃</span><span class="n">FOO</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>

    <span class="k">if</span> <span class="n">FOO</span> <span class="p">{</span>
        <span class="nd">println!</span><span class="p">(</span><span class="s">"It's true"</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nd">println!</span><span class="p">(</span><span class="s">"It's false"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="pull_assignment_up" class="discrete"><code>pull_assignment_up</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/pull_assignment_up.rs#L11">pull_assignment_up.rs</a></p>
</div>
<div class="paragraph">
<p>Extracts variable assignment to outside an if or match statement.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="k">mut</span> <span class="n">foo</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>

    <span class="k">if</span> <span class="k">true</span> <span class="p">{</span>
        <span class="err">┃</span><span class="n">foo</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">foo</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="k">mut</span> <span class="n">foo</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>

    <span class="n">foo</span> <span class="o">=</span> <span class="k">if</span> <span class="k">true</span> <span class="p">{</span>
        <span class="mi">5</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="mi">4</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="qualify_method_call" class="discrete"><code>qualify_method_call</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/qualify_method_call.rs#L13">qualify_method_call.rs</a></p>
</div>
<div class="paragraph">
<p>Replaces the method call with a qualified function call.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Foo</span><span class="p">;</span>
<span class="k">impl</span> <span class="n">Foo</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>
<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">foo</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">;</span>
    <span class="n">foo</span><span class="py">.fo</span><span class="err">┃</span><span class="nf">o</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Foo</span><span class="p">;</span>
<span class="k">impl</span> <span class="n">Foo</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>
<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">foo</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">;</span>
    <span class="nn">Foo</span><span class="p">::</span><span class="nf">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="n">foo</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="qualify_path" class="discrete"><code>qualify_path</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/qualify_path.rs#L21">qualify_path.rs</a></p>
</div>
<div class="paragraph">
<p>If the name is unresolved, provides all possible qualified paths for it.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">map</span> <span class="o">=</span> <span class="n">HashMap</span><span class="err">┃</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">map</span> <span class="o">=</span> <span class="nn">std</span><span class="p">::</span><span class="nn">collections</span><span class="p">::</span><span class="nn">HashMap</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="remove_dbg" class="discrete"><code>remove_dbg</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/remove_dbg.rs#L9">remove_dbg.rs</a></p>
</div>
<div class="paragraph">
<p>Removes <code>dbg!()</code> macro call.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="err">┃</span><span class="nd">dbg!</span><span class="p">(</span><span class="mi">92</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="mi">92</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="remove_hash" class="discrete"><code>remove_hash</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/raw_string.rs#L119">raw_string.rs</a></p>
</div>
<div class="paragraph">
<p>Removes a hash from a raw string literal.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="s">r#"Hello,┃ World!"#</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="s">r"Hello, World!"</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="remove_mut" class="discrete"><code>remove_mut</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/remove_mut.rs#L5">remove_mut.rs</a></p>
</div>
<div class="paragraph">
<p>Removes the <code>mut</code> keyword.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">impl</span> <span class="n">Walrus</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">feed</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="err">┃</span> <span class="k">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">:</span> <span class="nb">u32</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">impl</span> <span class="n">Walrus</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">feed</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">:</span> <span class="nb">u32</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="remove_unused_param" class="discrete"><code>remove_unused_param</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/remove_unused_param.rs#L14">remove_unused_param.rs</a></p>
</div>
<div class="paragraph">
<p>Removes unused function parameter.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">frobnicate</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">i32</span><span class="err">┃</span><span class="p">)</span> <span class="p">{}</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">frobnicate</span><span class="p">(</span><span class="mi">92</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">frobnicate</span><span class="p">()</span> <span class="p">{}</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">frobnicate</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="reorder_fields" class="discrete"><code>reorder_fields</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/reorder_fields.rs#L9">reorder_fields.rs</a></p>
</div>
<div class="paragraph">
<p>Reorder the fields of record literals and record patterns in the same order as in
the definition.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Foo</span> <span class="p">{</span><span class="n">foo</span><span class="p">:</span> <span class="nb">i32</span><span class="p">,</span> <span class="n">bar</span><span class="p">:</span> <span class="nb">i32</span><span class="p">};</span>
<span class="k">const</span> <span class="n">test</span><span class="p">:</span> <span class="n">Foo</span> <span class="o">=</span> <span class="err">┃</span><span class="n">Foo</span> <span class="p">{</span><span class="n">bar</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">foo</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Foo</span> <span class="p">{</span><span class="n">foo</span><span class="p">:</span> <span class="nb">i32</span><span class="p">,</span> <span class="n">bar</span><span class="p">:</span> <span class="nb">i32</span><span class="p">};</span>
<span class="k">const</span> <span class="n">test</span><span class="p">:</span> <span class="n">Foo</span> <span class="o">=</span> <span class="n">Foo</span> <span class="p">{</span><span class="n">foo</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">bar</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="reorder_impl" class="discrete"><code>reorder_impl</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/reorder_impl.rs#L13">reorder_impl.rs</a></p>
</div>
<div class="paragraph">
<p>Reorder the methods of an <code>impl Trait</code>. The methods will be ordered
in the same order as in the trait definition.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
</pre></td><td class="code"><pre><span class="k">trait</span> <span class="n">Foo</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">a</span><span class="p">()</span> <span class="p">{}</span>
    <span class="k">fn</span> <span class="nf">b</span><span class="p">()</span> <span class="p">{}</span>
    <span class="k">fn</span> <span class="nf">c</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="k">struct</span> <span class="n">Bar</span><span class="p">;</span>
<span class="err">┃</span><span class="k">impl</span> <span class="n">Foo</span> <span class="k">for</span> <span class="n">Bar</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">b</span><span class="p">()</span> <span class="p">{}</span>
    <span class="k">fn</span> <span class="nf">c</span><span class="p">()</span> <span class="p">{}</span>
    <span class="k">fn</span> <span class="nf">a</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
</pre></td><td class="code"><pre><span class="k">trait</span> <span class="n">Foo</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">a</span><span class="p">()</span> <span class="p">{}</span>
    <span class="k">fn</span> <span class="nf">b</span><span class="p">()</span> <span class="p">{}</span>
    <span class="k">fn</span> <span class="nf">c</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="k">struct</span> <span class="n">Bar</span><span class="p">;</span>
<span class="k">impl</span> <span class="n">Foo</span> <span class="k">for</span> <span class="n">Bar</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">a</span><span class="p">()</span> <span class="p">{}</span>
    <span class="k">fn</span> <span class="nf">b</span><span class="p">()</span> <span class="p">{}</span>
    <span class="k">fn</span> <span class="nf">c</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="replace_char_with_string" class="discrete"><code>replace_char_with_string</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/replace_string_with_char.rs#L51">replace_string_with_char.rs</a></p>
</div>
<div class="paragraph">
<p>Replace a char literal with a string literal.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">find</span><span class="p">(</span><span class="err">'</span><span class="p">{</span><span class="err">┃'</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">find</span><span class="p">(</span><span class="s">"{"</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="replace_derive_with_manual_impl" class="discrete"><code>replace_derive_with_manual_impl</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/replace_derive_with_manual_impl.rs#L19">replace_derive_with_manual_impl.rs</a></p>
</div>
<div class="paragraph">
<p>Converts a <code>derive</code> impl into a manual one.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre><span class="nd">#[derive(Deb</span><span class="err">┃</span><span class="nd">ug,</span> <span class="nd">Display)]</span>
<span class="k">struct</span> <span class="n">S</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="nd">#[derive(Display)]</span>
<span class="k">struct</span> <span class="n">S</span><span class="p">;</span>

<span class="k">impl</span> <span class="n">Debug</span> <span class="k">for</span> <span class="n">S</span> <span class="p">{</span>
    <span class="err">┃</span><span class="k">fn</span> <span class="nf">fmt</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">,</span> <span class="n">f</span><span class="p">:</span> <span class="o">&amp;</span><span class="k">mut</span> <span class="n">Formatter</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Result</span><span class="o">&lt;</span><span class="p">()</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="n">f</span><span class="nf">.debug_struct</span><span class="p">(</span><span class="s">"S"</span><span class="p">)</span><span class="nf">.finish</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="replace_if_let_with_match" class="discrete"><code>replace_if_let_with_match</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/replace_if_let_with_match.rs#L19">replace_if_let_with_match.rs</a></p>
</div>
<div class="paragraph">
<p>Replaces a <code>if let</code> expression with a <code>match</code> expression.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="err">┃</span><span class="k">if</span> <span class="k">let</span> <span class="nn">Action</span><span class="p">::</span><span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span> <span class="p">}</span> <span class="o">=</span> <span class="n">action</span> <span class="p">{</span>
        <span class="nf">foo</span><span class="p">(</span><span class="n">distance</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nf">bar</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">match</span> <span class="n">action</span> <span class="p">{</span>
        <span class="nn">Action</span><span class="p">::</span><span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span> <span class="p">}</span> <span class="k">=&gt;</span> <span class="nf">foo</span><span class="p">(</span><span class="n">distance</span><span class="p">),</span>
        <span class="mi">_</span> <span class="k">=&gt;</span> <span class="nf">bar</span><span class="p">(),</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="replace_let_with_if_let" class="discrete"><code>replace_let_with_if_let</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/replace_let_with_if_let.rs#L15">replace_let_with_if_let.rs</a></p>
</div>
<div class="paragraph">
<p>Replaces <code>let</code> with an <code>if let</code>.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre>
<span class="k">fn</span> <span class="nf">main</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="err">┃</span><span class="k">let</span> <span class="n">x</span> <span class="o">=</span> <span class="nf">compute</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">compute</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="nb">Option</span><span class="o">&lt;</span><span class="nb">i32</span><span class="o">&gt;</span> <span class="p">{</span> <span class="nb">None</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre>
<span class="k">fn</span> <span class="nf">main</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="k">let</span> <span class="nf">Some</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">=</span> <span class="nf">compute</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">compute</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="nb">Option</span><span class="o">&lt;</span><span class="nb">i32</span><span class="o">&gt;</span> <span class="p">{</span> <span class="nb">None</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="replace_match_with_if_let" class="discrete"><code>replace_match_with_if_let</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/replace_if_let_with_match.rs#L160">replace_if_let_with_match.rs</a></p>
</div>
<div class="paragraph">
<p>Replaces a binary <code>match</code> with a wildcard pattern and no guards with an <code>if let</code> expression.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="err">┃</span><span class="k">match</span> <span class="n">action</span> <span class="p">{</span>
        <span class="nn">Action</span><span class="p">::</span><span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span> <span class="p">}</span> <span class="k">=&gt;</span> <span class="nf">foo</span><span class="p">(</span><span class="n">distance</span><span class="p">),</span>
        <span class="mi">_</span> <span class="k">=&gt;</span> <span class="nf">bar</span><span class="p">(),</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="k">let</span> <span class="nn">Action</span><span class="p">::</span><span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span> <span class="p">}</span> <span class="o">=</span> <span class="n">action</span> <span class="p">{</span>
        <span class="nf">foo</span><span class="p">(</span><span class="n">distance</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nf">bar</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="replace_qualified_name_with_use" class="discrete"><code>replace_qualified_name_with_use</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/replace_qualified_name_with_use.rs#L13">replace_qualified_name_with_use.rs</a></p>
</div>
<div class="paragraph">
<p>Adds a use statement for a given fully-qualified name.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">process</span><span class="p">(</span><span class="n">map</span><span class="p">:</span> <span class="nn">std</span><span class="p">::</span><span class="nn">collections</span><span class="p">::</span><span class="err">┃</span><span class="n">HashMap</span><span class="o">&lt;</span><span class="nb">String</span><span class="p">,</span> <span class="nb">String</span><span class="o">&gt;</span><span class="p">)</span> <span class="p">{}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">collections</span><span class="p">::</span><span class="n">HashMap</span><span class="p">;</span>

<span class="k">fn</span> <span class="nf">process</span><span class="p">(</span><span class="n">map</span><span class="p">:</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="nb">String</span><span class="p">,</span> <span class="nb">String</span><span class="o">&gt;</span><span class="p">)</span> <span class="p">{}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="replace_string_with_char" class="discrete"><code>replace_string_with_char</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/replace_string_with_char.rs#L11">replace_string_with_char.rs</a></p>
</div>
<div class="paragraph">
<p>Replace string literal with char literal.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">find</span><span class="p">(</span><span class="s">"{┃"</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">find</span><span class="p">(</span><span class="sc">'{'</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="replace_try_expr_with_match" class="discrete"><code>replace_try_expr_with_match</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/replace_try_expr_with_match.rs#L18">replace_try_expr_with_match.rs</a></p>
</div>
<div class="paragraph">
<p>Replaces a <code>try</code> expression with a <code>match</code> expression.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">handle</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">pat</span> <span class="o">=</span> <span class="nf">Some</span><span class="p">(</span><span class="k">true</span><span class="p">)</span><span class="err">┃</span><span class="o">?</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">handle</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">pat</span> <span class="o">=</span> <span class="k">match</span> <span class="nf">Some</span><span class="p">(</span><span class="k">true</span><span class="p">)</span> <span class="p">{</span>
        <span class="nf">Some</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="n">it</span><span class="p">,</span>
        <span class="nb">None</span> <span class="k">=&gt;</span> <span class="k">return</span> <span class="nb">None</span><span class="p">,</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="replace_turbofish_with_explicit_type" class="discrete"><code>replace_turbofish_with_explicit_type</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/replace_turbofish_with_explicit_type.rs#L12">replace_turbofish_with_explicit_type.rs</a></p>
</div>
<div class="paragraph">
<p>Converts <code>::&lt;_&gt;</code> to an explicit type assignment.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="n">make</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">T</span> <span class="p">{</span> <span class="p">)</span> <span class="p">}</span>
<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">a</span> <span class="o">=</span> <span class="n">make</span><span class="err">┃</span><span class="p">::</span><span class="o">&lt;</span><span class="nb">i32</span><span class="o">&gt;</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="n">make</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">T</span> <span class="p">{</span> <span class="p">)</span> <span class="p">}</span>
<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">a</span><span class="p">:</span> <span class="nb">i32</span> <span class="o">=</span> <span class="nf">make</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="sort_items" class="discrete"><code>sort_items</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/sort_items.rs#L12">sort_items.rs</a></p>
</div>
<div class="paragraph">
<p>Sorts item members alphabetically: fields, enum variants and methods.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="err">┃</span><span class="n">Foo</span><span class="err">┃</span> <span class="p">{</span> <span class="n">second</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span> <span class="n">first</span><span class="p">:</span> <span class="nb">String</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Foo</span> <span class="p">{</span> <span class="n">first</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> <span class="n">second</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<hr>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">trait</span> <span class="err">┃</span><span class="n">Bar</span><span class="err">┃</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">second</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">u32</span><span class="p">;</span>
    <span class="k">fn</span> <span class="nf">first</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">String</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">trait</span> <span class="n">Bar</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">first</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">String</span><span class="p">;</span>
    <span class="k">fn</span> <span class="nf">second</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">u32</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<hr>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Baz</span><span class="p">;</span>
<span class="k">impl</span> <span class="err">┃</span><span class="n">Baz</span><span class="err">┃</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">second</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">u32</span><span class="p">;</span>
    <span class="k">fn</span> <span class="nf">first</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">String</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Baz</span><span class="p">;</span>
<span class="k">impl</span> <span class="n">Baz</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">first</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">String</span><span class="p">;</span>
    <span class="k">fn</span> <span class="nf">second</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">u32</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<hr>
<div class="paragraph">
<p>There is a difference between sorting enum variants:</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="err">┃</span><span class="n">Animal</span><span class="err">┃</span> <span class="p">{</span>
  <span class="nf">Dog</span><span class="p">(</span><span class="nb">String</span><span class="p">,</span> <span class="nb">f64</span><span class="p">),</span>
  <span class="n">Cat</span> <span class="p">{</span> <span class="n">weight</span><span class="p">:</span> <span class="nb">f64</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">String</span> <span class="p">},</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Animal</span> <span class="p">{</span>
  <span class="n">Cat</span> <span class="p">{</span> <span class="n">weight</span><span class="p">:</span> <span class="nb">f64</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">String</span> <span class="p">},</span>
  <span class="nf">Dog</span><span class="p">(</span><span class="nb">String</span><span class="p">,</span> <span class="nb">f64</span><span class="p">),</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>and sorting a single enum struct variant:</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Animal</span> <span class="p">{</span>
  <span class="nf">Dog</span><span class="p">(</span><span class="nb">String</span><span class="p">,</span> <span class="nb">f64</span><span class="p">),</span>
  <span class="n">Cat</span> <span class="err">┃</span><span class="p">{</span> <span class="n">weight</span><span class="p">:</span> <span class="nb">f64</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">String</span> <span class="p">}</span><span class="err">┃</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Animal</span> <span class="p">{</span>
  <span class="nf">Dog</span><span class="p">(</span><span class="nb">String</span><span class="p">,</span> <span class="nb">f64</span><span class="p">),</span>
  <span class="n">Cat</span> <span class="p">{</span> <span class="n">name</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> <span class="n">weight</span><span class="p">:</span> <span class="nb">f64</span> <span class="p">},</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="split_import" class="discrete"><code>split_import</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/split_import.rs#L5">split_import.rs</a></p>
</div>
<div class="paragraph">
<p>Wraps the tail of import into braces.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="err">┃</span><span class="nn">collections</span><span class="p">::</span><span class="n">HashMap</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::{</span><span class="nn">collections</span><span class="p">::</span><span class="n">HashMap</span><span class="p">};</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="toggle_ignore" class="discrete"><code>toggle_ignore</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/toggle_ignore.rs#L8">toggle_ignore.rs</a></p>
</div>
<div class="paragraph">
<p>Adds <code>#[ignore]</code> attribute to the test.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="err">┃</span><span class="nd">#[test]</span>
<span class="k">fn</span> <span class="n">arithmetics</span> <span class="p">{</span>
    <span class="nd">assert_eq!</span><span class="p">(</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="nd">#[test]</span>
<span class="nd">#[ignore]</span>
<span class="k">fn</span> <span class="n">arithmetics</span> <span class="p">{</span>
    <span class="nd">assert_eq!</span><span class="p">(</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="unmerge_use" class="discrete"><code>unmerge_use</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/unmerge_use.rs#L13">unmerge_use.rs</a></p>
</div>
<div class="paragraph">
<p>Extracts single use item from use list.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">fmt</span><span class="p">::{</span><span class="n">Debug</span><span class="p">,</span> <span class="n">Display</span><span class="err">┃</span><span class="p">};</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">fmt</span><span class="p">::{</span><span class="n">Debug</span><span class="p">};</span>
<span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">fmt</span><span class="p">::</span><span class="n">Display</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="unwrap_block" class="discrete"><code>unwrap_block</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/unwrap_block.rs#L11">unwrap_block.rs</a></p>
</div>
<div class="paragraph">
<p>This assist removes if&#8230;&#8203;else, for, while and loop control statements to just keep the body.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="k">true</span> <span class="p">{</span><span class="err">┃</span>
        <span class="nd">println!</span><span class="p">(</span><span class="s">"foo"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{</span>
    <span class="nd">println!</span><span class="p">(</span><span class="s">"foo"</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="unwrap_result_return_type" class="discrete"><code>unwrap_result_return_type</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/unwrap_result_return_type.rs#L10">unwrap_result_return_type.rs</a></p>
</div>
<div class="paragraph">
<p>Unwrap the function&#8217;s return type.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">Result</span><span class="o">&lt;</span><span class="nb">i32</span><span class="o">&gt;</span><span class="err">┃</span> <span class="p">{</span> <span class="nf">Ok</span><span class="p">(</span><span class="mi">42i32</span><span class="p">)</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="nb">i32</span> <span class="p">{</span> <span class="mi">42i32</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="wrap_return_type_in_result" class="discrete"><code>wrap_return_type_in_result</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/wrap_return_type_in_result.rs#L11">wrap_return_type_in_result.rs</a></p>
</div>
<div class="paragraph">
<p>Wrap the function&#8217;s return type into Result.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="nb">i32</span><span class="err">┃</span> <span class="p">{</span> <span class="mi">42i32</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">Result</span><span class="o">&lt;</span><span class="nb">i32</span><span class="p">,</span> <span class="err">$</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span><span class="mi">_</span><span class="p">}</span><span class="o">&gt;</span> <span class="p">{</span> <span class="nf">Ok</span><span class="p">(</span><span class="mi">42i32</span><span class="p">)</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="diagnostics"><a class="anchor" href="#diagnostics"></a>Diagnostics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>While most errors and warnings provided by rust-analyzer come from the <code>cargo check</code> integration, there&#8217;s a growing number of diagnostics implemented using rust-analyzer&#8217;s own analysis.
Some of these diagnostics don&#8217;t respect <code>#[allow]</code> or <code>\#[deny]</code> attributes yet, but can be turned off using the <code>rust-analyzer.diagnostics.enable</code>, <code>rust-analyzer.diagnostics.enableExperimental</code> or <code>rust-analyzer.diagnostics.disabled</code> settings.</p>
</div>
<div class="sect2">
<h3 id="add-reference-here"><a class="anchor" href="#add-reference-here"></a>add-reference-here</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_diagnostics/src/handlers/add_reference_here.rs#L8">add_reference_here.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered when there&#8217;s a missing referencing of expression.</p>
</div>
</div>
<div class="sect2">
<h3 id="break-outside-of-loop"><a class="anchor" href="#break-outside-of-loop"></a>break-outside-of-loop</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_diagnostics/src/handlers/break_outside_of_loop.rs#L3">break_outside_of_loop.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if the <code>break</code> keyword is used outside of a loop.</p>
</div>
</div>
<div class="sect2">
<h3 id="inactive-code"><a class="anchor" href="#inactive-code"></a>inactive-code</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_diagnostics/src/handlers/inactive_code.rs#L6">inactive_code.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is shown for code with inactive <code>#[cfg]</code> attributes.</p>
</div>
</div>
<div class="sect2">
<h3 id="incorrect-ident-case"><a class="anchor" href="#incorrect-ident-case"></a>incorrect-ident-case</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_diagnostics/src/handlers/incorrect_case.rs#L13">incorrect_case.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if an item name doesn&#8217;t follow <a href="https://doc.rust-lang.org/1.0.0/style/style/naming/README.html">Rust naming convention</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="invalid-derive-target"><a class="anchor" href="#invalid-derive-target"></a>invalid-derive-target</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_diagnostics/src/handlers/invalid_derive_target.rs#L3">invalid_derive_target.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is shown when the derive attribute is used on an item other than a <code>struct</code>,
<code>enum</code> or <code>union</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="macro-error"><a class="anchor" href="#macro-error"></a>macro-error</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_diagnostics/src/handlers/macro_error.rs#L3">macro_error.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is shown for macro expansion errors.</p>
</div>
</div>
<div class="sect2">
<h3 id="malformed-derive"><a class="anchor" href="#malformed-derive"></a>malformed-derive</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_diagnostics/src/handlers/malformed_derive.rs#L3">malformed_derive.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is shown when the derive attribute has invalid input.</p>
</div>
</div>
<div class="sect2">
<h3 id="mismatched-arg-count"><a class="anchor" href="#mismatched-arg-count"></a>mismatched-arg-count</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_diagnostics/src/handlers/mismatched_arg_count.rs#L10">mismatched_arg_count.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if a function is invoked with an incorrect amount of arguments.</p>
</div>
</div>
<div class="sect2">
<h3 id="missing-fields"><a class="anchor" href="#missing-fields"></a>missing-fields</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_diagnostics/src/handlers/missing_fields.rs#L11">missing_fields.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if record lacks some fields that exist in the corresponding structure.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">A</span> <span class="p">{</span> <span class="n">a</span><span class="p">:</span> <span class="nb">u8</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">u8</span> <span class="p">}</span>

<span class="k">let</span> <span class="n">a</span> <span class="o">=</span> <span class="n">A</span> <span class="p">{</span> <span class="n">a</span><span class="p">:</span> <span class="mi">10</span> <span class="p">};</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="missing-match-arm"><a class="anchor" href="#missing-match-arm"></a>missing-match-arm</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_diagnostics/src/handlers/missing_match_arms.rs#L5">missing_match_arms.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if <code>match</code> block is missing one or more match arms.</p>
</div>
</div>
<div class="sect2">
<h3 id="missing-ok-or-some-in-tail-expr"><a class="anchor" href="#missing-ok-or-some-in-tail-expr"></a>missing-ok-or-some-in-tail-expr</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_diagnostics/src/handlers/missing_ok_or_some_in_tail_expr.rs#L8">missing_ok_or_some_in_tail_expr.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if a block that should return <code>Result</code> returns a value not wrapped in <code>Ok</code>,
or if a block that should return <code>Option</code> returns a value not wrapped in <code>Some</code>.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">Result</span><span class="o">&lt;</span><span class="nb">u8</span><span class="p">,</span> <span class="p">()</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="mi">10</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="missing-unsafe"><a class="anchor" href="#missing-unsafe"></a>missing-unsafe</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_diagnostics/src/handlers/missing_unsafe.rs#L3">missing_unsafe.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if an operation marked as <code>unsafe</code> is used outside of an <code>unsafe</code> function or block.</p>
</div>
</div>
<div class="sect2">
<h3 id="no-such-field"><a class="anchor" href="#no-such-field"></a>no-such-field</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_diagnostics/src/handlers/no_such_field.rs#L11">no_such_field.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if created structure does not have field provided in record.</p>
</div>
</div>
<div class="sect2">
<h3 id="remove-this-semicolon"><a class="anchor" href="#remove-this-semicolon"></a>remove-this-semicolon</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_diagnostics/src/handlers/remove_this_semicolon.rs#L10">remove_this_semicolon.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered when there&#8217;s an erroneous <code>;</code> at the end of the block.</p>
</div>
</div>
<div class="sect2">
<h3 id="replace-filter-map-next-with-find-map"><a class="anchor" href="#replace-filter-map-next-with-find-map"></a>replace-filter-map-next-with-find-map</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_diagnostics/src/handlers/replace_filter_map_next_with_find_map.rs#L11">replace_filter_map_next_with_find_map.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered when <code>.filter_map(..).next()</code> is used, rather than the more concise <code>.find_map(..)</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="unimplemented-builtin-macro"><a class="anchor" href="#unimplemented-builtin-macro"></a>unimplemented-builtin-macro</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_diagnostics/src/handlers/unimplemented_builtin_macro.rs#L3">unimplemented_builtin_macro.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is shown for builtin macros which are not yet implemented by rust-analyzer</p>
</div>
</div>
<div class="sect2">
<h3 id="unlinked-file"><a class="anchor" href="#unlinked-file"></a>unlinked-file</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_diagnostics/src/handlers/unlinked_file.rs#L17">unlinked_file.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is shown for files that are not included in any crate, or files that are part of
crates rust-analyzer failed to discover. The file will not have IDE features available.</p>
</div>
</div>
<div class="sect2">
<h3 id="unnecessary-braces"><a class="anchor" href="#unnecessary-braces"></a>unnecessary-braces</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_diagnostics/src/handlers/useless_braces.rs#L8">useless_braces.rs</a></p>
</div>
<div class="paragraph">
<p>Diagnostic for unnecessary braces in <code>use</code> items.</p>
</div>
</div>
<div class="sect2">
<h3 id="unresolved-extern-crate"><a class="anchor" href="#unresolved-extern-crate"></a>unresolved-extern-crate</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_diagnostics/src/handlers/unresolved_extern_crate.rs#L3">unresolved_extern_crate.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if rust-analyzer is unable to discover referred extern crate.</p>
</div>
</div>
<div class="sect2">
<h3 id="unresolved-import"><a class="anchor" href="#unresolved-import"></a>unresolved-import</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_diagnostics/src/handlers/unresolved_import.rs#L3">unresolved_import.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if rust-analyzer is unable to resolve a path in
a <code>use</code> declaration.</p>
</div>
</div>
<div class="sect2">
<h3 id="unresolved-macro-call"><a class="anchor" href="#unresolved-macro-call"></a>unresolved-macro-call</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_diagnostics/src/handlers/unresolved_macro_call.rs#L6">unresolved_macro_call.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if rust-analyzer is unable to resolve the path
to a macro in a macro invocation.</p>
</div>
</div>
<div class="sect2">
<h3 id="unresolved-module"><a class="anchor" href="#unresolved-module"></a>unresolved-module</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_diagnostics/src/handlers/unresolved_module.rs#L7">unresolved_module.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if rust-analyzer is unable to discover referred module.</p>
</div>
</div>
<div class="sect2">
<h3 id="unresolved-proc-macro"><a class="anchor" href="#unresolved-proc-macro"></a>unresolved-proc-macro</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_diagnostics/src/handlers/unresolved_proc_macro.rs#L3">unresolved_proc_macro.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is shown when a procedural macro can not be found. This usually means that
procedural macro support is simply disabled (and hence is only a weak hint instead of an error),
but can also indicate project setup problems.</p>
</div>
<div class="paragraph">
<p>If you are seeing a lot of "proc macro not expanded" warnings, you can add this option to the
<code>rust-analyzer.diagnostics.disabled</code> list to prevent them from showing. Alternatively you can
enable support for procedural macros (see <code>rust-analyzer.procMacro.enable</code>).</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="editor-features"><a class="anchor" href="#editor-features"></a>Editor Features</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="vs-code-2"><a class="anchor" href="#vs-code-2"></a>VS Code</h3>
<div class="sect3">
<h4 id="color-configurations"><a class="anchor" href="#color-configurations"></a>Color configurations</h4>
<div class="paragraph">
<p>It is possible to change the foreground/background color of inlay hints.
Just add this to your <code>settings.json</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="jsonc"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
</pre></td><td class="code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"workbench.colorCustomizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="c1">// Name of the theme you are currently using</span><span class="w">
    </span><span class="nl">"[Default Dark+]"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"rust_analyzer.inlayHints.foreground"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#868686f0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"rust_analyzer.inlayHints.background"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#3d3d3d48"</span><span class="p">,</span><span class="w">

      </span><span class="c1">// Overrides for specific kinds of inlay hints</span><span class="w">
      </span><span class="nl">"rust_analyzer.inlayHints.foreground.typeHints"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#fdb6fdf0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"rust_analyzer.inlayHints.foreground.paramHints"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#fdb6fdf0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"rust_analyzer.inlayHints.background.chainingHints"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#6b0c0c81"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="semantic-style-customizations"><a class="anchor" href="#semantic-style-customizations"></a>Semantic style customizations</h4>
<div class="paragraph">
<p>You can customize the look of different semantic elements in the source code.
For example, mutable bindings are underlined by default and you can override this behavior by adding the following section to your <code>settings.json</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="jsonc"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"editor.semanticTokenColorCustomizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"*.mutable"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"fontStyle"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="c1">// underline is the default</span><span class="w">
      </span><span class="p">},</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Most themes doesn&#8217;t support styling unsafe operations differently yet. You can fix this by adding overrides for the rules <code>operator.unsafe</code>, <code>function.unsafe</code>, and <code>method.unsafe</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="jsonc"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="p">{</span><span class="w">
   </span><span class="nl">"editor.semanticTokenColorCustomizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
             </span><span class="nl">"operator.unsafe"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#ff6600"</span><span class="p">,</span><span class="w">
             </span><span class="nl">"function.unsafe"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#ff6600"</span><span class="w">
             </span><span class="nl">"method.unsafe"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#ff6600"</span><span class="w">
         </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition to the top-level rules you can specify overrides for specific themes. For example, if you wanted to use a darker text color on a specific light theme, you might write:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="jsonc"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
</pre></td><td class="code"><pre><span class="p">{</span><span class="w">
   </span><span class="nl">"editor.semanticTokenColorCustomizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
             </span><span class="nl">"operator.unsafe"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#ff6600"</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="nl">"[Ayu Light]"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
               </span><span class="nl">"operator.unsafe"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#572300"</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Make sure you include the brackets around the theme name. For example, use <code>"[Ayu Light]"</code> to customize the theme Ayu Light.</p>
</div>
</div>
<div class="sect3">
<h4 id="special-when-clause-context-for-keybindings"><a class="anchor" href="#special-when-clause-context-for-keybindings"></a>Special <code>when</code> clause context for keybindings.</h4>
<div class="paragraph">
<p>You may use <code>inRustProject</code> context to configure keybindings for rust projects only.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ctrl+i"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rust-analyzer.toggleInlayHints"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"when"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inRustProject"</span><span class="w">
</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>More about <code>when</code> clause contexts <a href="https://code.visualstudio.com/docs/getstarted/keybindings#_when-clause-contexts">here</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="setting-runnable-environment-variables"><a class="anchor" href="#setting-runnable-environment-variables"></a>Setting runnable environment variables</h4>
<div class="paragraph">
<p>You can use "rust-analyzer.runnableEnv" setting to define runnable environment-specific substitution variables.
The simplest way for all runnables in a bunch:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="jsonc"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="nl">"rust-analyzer.runnableEnv"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"RUN_SLOW_TESTS"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="w">
</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Or it is possible to specify vars more granularly:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="jsonc"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
</pre></td><td class="code"><pre><span class="nl">"rust-analyzer.runnableEnv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="c1">// "mask": null, // null mask means that this rule will be applied for all runnables</span><span class="w">
        </span><span class="na">env</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
             </span><span class="nl">"APP_ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
             </span><span class="nl">"APP_DATA"</span><span class="p">:</span><span class="w"> </span><span class="s2">"asdf"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"mask"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test_name"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
             </span><span class="nl">"APP_ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w"> </span><span class="c1">// overwrites only APP_ID</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use any valid regular expression as a mask.
Also note that a full runnable name is something like <strong>run bin_or_example_name</strong>, <strong>test some::mod::test_name</strong> or <strong>test-mod some::mod</strong>, so it is possible to distinguish binaries, single tests, and test modules with this masks: <code>"^run"</code>, <code>"^test "</code> (the trailing space matters!), and <code>"^test-mod"</code> respectively.</p>
</div>
</div>
<div class="sect3">
<h4 id="compiler-feedback-from-external-commands"><a class="anchor" href="#compiler-feedback-from-external-commands"></a>Compiler feedback from external commands</h4>
<div class="paragraph">
<p>Instead of relying on the built-in <code>cargo check</code>, you can configure Code to run a command in the background and use the <code>$rustc-watch</code> problem matcher to generate inline error markers from its output.</p>
</div>
<div class="paragraph">
<p>To do this you need to create a new <a href="https://code.visualstudio.com/docs/editor/tasks">VS Code Task</a> and set <code>rust-analyzer.checkOnSave.enable: false</code> in preferences.</p>
</div>
<div class="paragraph">
<p>For example, if you want to run <a href="https://crates.io/crates/cargo-watch"><code>cargo watch</code></a> instead, you might add the following to <code>.vscode/tasks.json</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="p">{</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Watch"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"group"</span><span class="p">:</span><span class="w"> </span><span class="s2">"build"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shell"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cargo watch"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"problemMatcher"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$rustc-watch"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"isBackground"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</article>

  </main>

  <footer>
    <div id="footer-inner">
      <div class="footer-by">
        <a href="https://ferrous-systems.com/">
          <img class="ferrous-logo" src="/assets/ferrous-logo.png">Ferrous Systems</a>
        &
        <a href="https://github.com/rust-analyzer/rust-analyzer/graphs/contributors">contributors</a>
      </div>

      <div id="footer-links">
        <a href="/feed.xml" class="footer-link">
          <i class="fa fa-rss"></i> rss
        </a>
        <a href="https://github.com/rust-analyzer/rust-analyzer.github.io" class="footer-link">
          <i class="fa fa-github"></i> src
        </a>
        <a href="https://opencollective.com/rust-analyzer/" class="footer-link">
          <i class="fa fa-github"></i> sponsor
        </a>
      </div>
    </div>
  </footer>
</body>

</html>
